import{E as d,D as S,p as L,s as k}from"./index-Cq8cKJF4.js";import{q as p}from"./index-B-cYlh1f.js";import{s as I}from"./stockin.api.schema-DJB3WlbE.js";import{M as b,L as A,A as l}from"./api.schema-BgX2oz3V.js";import{o as i,s as t,n,a as m,c as f}from"./types-CVZIcfwR.js";const g="/api",y={getlines:a=>d.get(`${g}/lines`,{params:a,paramsSerializer:s=>p.stringify(s,{arrayFormat:"brackets"})}).then(s=>s.data),getlineById:a=>{const{id:s,...e}=a;return d.get(`${g}/lines/${s}`,{params:e,paramsSerializer:o=>p.stringify(o,{arrayFormat:"brackets"})}).then(o=>o.data)}},v=i({id:n().optional(),name:t().min(1,"Line name is required"),location:t().nullable(),latestStockin:I.nullable()}),w=i({id:n().optional(),name:t().min(1,"Line name is required"),location:t().nullable()}),B=i({size:t(),bundle:n().int().nonnegative(),pcs:t().or(n()),defect:t().or(n())}),F=i({color:t(),totalBundle:n().int().nonnegative(),totalPcs:n().int().nonnegative(),totalDefect:n().int().nonnegative(),sizes:m(B)}),T=i({glNo:t(),totalColors:n().int().positive(),totalPcs:n().int().nonnegative(),colors:m(F)}),q=i({message:t(),data:i({line:w,stockinSummary:m(T)}),status:f()}),z=m(v),P=i({message:t(),data:z,links:A,meta:b,status:f()}),D=S("lines",{state:()=>({data:[],meta:{},links:{},loading:!1,error:null,line:{},lineStockInSummary:[]}),actions:{async fetchLines(a){this.loading=!0,this.error=null;try{const s=await y.getlines(a),e=P.parse(s);return this.data=e.data,this.meta=e.meta,this.links=e.links,l.parse({success:!0,message:e.message??"Lines loaded"})}catch(s){const e=s?.response?.data?.message||"Something went wrong";return this.error=e,l.parse({success:!1,message:e})}finally{this.loading=!1}},async fetchLineById(a){this.loading=!0,this.error=null;try{const s=await y.getlineById(a),e=q.parse(s);return this.line=e.data.line,this.lineStockInSummary=e.data.stockinSummary,l.parse({success:!0,message:e.message??"Lines loaded"})}catch(s){const e=s?.response?.data?.message||"Something went wrong";return this.error=e,l.parse({success:!1,message:e})}finally{this.loading=!1}}}});function E(){const a=L(),s=D(),{line:e,lineStockInSummary:o}=k(s);return{line:e,lineStockInSummary:o,handleFetch:async(u={notify:!0},h)=>{const{success:c,message:r}=await s.fetchLines(h);return u.notify&&(c?a.success(r):a.error(r)),{success:c,message:r}},handleFetchById:async(u={notify:!0},h)=>{const{success:c,message:r}=await s.fetchLineById(h);return u.notify&&(c?a.success(r):a.error(r)),{success:c,message:r}}}}export{E as a,D as u};
