import{_ as B}from"./BaseButton.vue_vue_type_script_setup_true_lang-B4Ux1n23.js";import{u as T}from"./gls.store-D8Ax207C.js";import{p as O,d as D,r as c,k as U,y as V,c as N,a as n,e as i,f as m,l as I,x as P,w as f,g as x,o as w,m as _,I as j,t as C}from"./index-CIPWK8yN.js";import{o as h,s as d}from"./types-CVZIcfwR.js";import{B as H,C as M}from"./ChartMultiple24Regular-DThSlT5I.js";import{S as A}from"./SmartHome-Ds7UqPzK.js";import"./index-B-cYlh1f.js";import"./_commonjsHelpers-CE1G-McA.js";import"./metaPagination-9MSE0uSw.js";import"./api.schema-B7NsqcGR.js";function z(){const g=T(),s=O();return{handleGLList:async(l={notify:!0},r)=>{const a=await g.fetchGLList(r);return l.notify&&(a.success?s.success(a.message):s.error(a.message)),a}}}h({glNumber:d().min(1,"Line name is required"),startDate:d().optional(),endDate:d().optional()});const E=h({glNumber:d().min(1,"GL Number Required"),color:d(),startDate:d().nullable().optional(),endDate:d().nullable().optional()}),F={class:"bg-gray-50 rounded-lg p-5"},J={class:"flex flex-col gap-3"},K={class:"flex"},Q={class:"flex"},W={class:"flex"},X={class:"flex gap-2 items-center h-[30px]"},Y=D({__name:"CompletionGenarateCard",setup(g){const s=c(null),p=c(null),l=c(!0),r=c([118313526e4,Date.now()]),a=c([]),b=c([]),y=c([]),{handleGLList:k}=z(),R=U(()=>a.value.map(o=>({label:o.glNumber,value:o.glNumber}))),S=o=>{p.value="all";const e=a.value.find(t=>t.glNumber===o);if(!e||!e.colors){b.value=[];return}b.value=e.colors,y.value=[{label:"All",value:"all"},...e.colors.map(t=>({label:t,value:t}))]},G=()=>{const o={glNumber:s.value,color:p.value};if(!l.value&&r.value?.length===2){const e=new Date(r.value[0]).toISOString().split("T")[0],t=new Date(r.value[1]).toISOString().split("T")[0];o.startDate=e,o.endDate=t}q(o)};function $({focused:o,checked:e}){const t={};return e?(t.background="#d03050",o&&(t.boxShadow="0 0 0 2px #d0305040")):(t.background="#2080f0",o&&(t.boxShadow="0 0 0 2px #2080f040")),t}const q=o=>{const e=E.safeParse(o);if(!e.success){console.error(e.error);return}const t=e.data,v={gl_number:t.glNumber,color:t.color};l.value||(t.startDate&&(v.start_date=t.startDate),t.endDate&&(v.end_date=t.endDate));const u=`http://192.168.5.13/backend/public/api/pdf/completion-report?${new URLSearchParams(v).toString()}`;window.open(u,"_blank")};return V(async()=>{const o=await k({notify:!0});o.success&&o.data&&(a.value=o.data)}),(o,e)=>{const t=m("n-select"),v=m("n-switch"),L=m("n-date-picker");return w(),N("div",F,[n("div",J,[n("div",K,[e[4]||(e[4]=n("p",{class:"w-[120px] font-semibold"},"GL Number",-1)),i(t,{value:s.value,"onUpdate:value":[e[0]||(e[0]=u=>s.value=u),S],options:R.value,filterable:"",class:"!w-[220px]"},null,8,["value","options"])]),n("div",Q,[e[5]||(e[5]=n("p",{class:"w-[120px] font-semibold"},"Color",-1)),i(t,{value:p.value,"onUpdate:value":e[1]||(e[1]=u=>p.value=u),options:y.value,class:"!w-[420px]",disabled:!s.value},null,8,["value","options","disabled"])]),n("div",W,[e[8]||(e[8]=n("p",{class:"w-[120px] font-semibold"},"Range Date",-1)),n("div",X,[i(v,{value:l.value,"onUpdate:value":e[2]||(e[2]=u=>l.value=u),"rail-style":$},{checked:f(()=>[...e[6]||(e[6]=[_("All Dates",-1)])]),unchecked:f(()=>[...e[7]||(e[7]=[_("Custom Dates",-1)])]),_:1},8,["value"]),l.value?P("",!0):(w(),I(L,{key:0,value:r.value,"onUpdate:value":e[3]||(e[3]=u=>r.value=u),type:"daterange",clearable:""},null,8,["value"]))])]),i(B,{label:"Generate Completion Report",icon:x(H),type:"primary",disabled:!s.value||!p.value,onClick:G},null,8,["icon","disabled"])])])}}}),Z={class:"flex flex-col gap-10"},ee={class:"flex justify-between items-center gap-10"},te={class:"w-80 flex-auto"},oe={class:"text-xl font-bold mb-1"},se={class:"w-16 flex-auto text-right"},ve=D({__name:"ReportCompletionPageView",setup(g){const s=c({title:"Completion Report",description:"The Completion Report module provides a clear and structured overview of all production tasks that have been fully completed across the sewing line. It consolidates completion data from GL Numbers, colors, sizes, workstations, and lines, giving supervisors end-to-end visibility of finished output."});return j({title:s.value.title,meta:[{name:"description",content:s.value.description}]}),(p,l)=>{const r=m("n-icon"),a=m("n-breadcrumb-item"),b=m("n-breadcrumb");return w(),N("div",Z,[n("div",ee,[n("div",te,[n("h2",oe,C(s.value.title),1),n("p",null,C(s.value.description),1)]),n("div",se,[i(b,null,{default:f(()=>[i(a,null,{default:f(()=>[i(r,{component:x(A)},null,8,["component"]),l[0]||(l[0]=_(" Home",-1))]),_:1}),i(a,null,{default:f(()=>[i(r,{component:x(M)},null,8,["component"]),l[1]||(l[1]=_(" Completion Report ",-1))]),_:1})]),_:1})])]),i(Y)])}}});export{ve as default};
