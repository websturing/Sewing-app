import{A as N}from"./AlertOutline-Cw6wTGm1.js";import{d as U,k as _,c as b,x as w,e as V,t as C,f as y,S as k,w as S,o as g,l as B,m as x,g as A,p as D}from"./index-BXp2mkfJ.js";import{u as E}from"./useFieldWrapper-Cdcl6Ajn.js";import{U as M}from"./user.schema-CdSDHvt6.js";import{u as T}from"./user.store-ml9iBoF8.js";import{t as I}from"./vee-validate-zod-Cgrd7h6v.js";import{u as L}from"./vee-validate-DC0xM54z.js";const O={class:"flex flex-col gap-1"},P=["for"],Y=U({__name:"SelectLabelWithError",props:{modelValue:{},options:{},name:{},label:{},icon:{},placeholder:{default:"Select Item"},errors:{},readonly:{type:Boolean},classContent:{},multiple:{type:Boolean,default:!1}},emits:["update:modelValue","change","search"],setup(u,{emit:s}){const e=u,l=s,n=_(()=>e.errors?.[e.name]),d=_(()=>n.value?"error":void 0);return(a,m)=>{const p=y("n-icon"),f=y("n-tooltip"),h=y("n-select");return g(),b("div",O,[a.label?(g(),b("label",{key:0,for:e.name,class:"text-sm font-medium text-gray-700"},C(a.label),9,P)):w("",!0),V(h,k({id:e.name,status:d.value,multiple:a.multiple,options:e.options,placeholder:e.placeholder,disabled:e.readonly,filterable:""},a.$attrs,{value:a.modelValue,"onUpdate:value":m[0]||(m[0]=c=>{l("update:modelValue",c),l("change",c)}),class:[e.classContent,"w-full"],onSearch:m[1]||(m[1]=c=>l("search",c))}),{arrow:S(()=>[n.value?(g(),B(f,{key:0,show:!!n.value,trigger:"hover"},{trigger:S(()=>[V(p,{component:A(N),color:"red"},null,8,["component"])]),default:S(()=>[x(" "+C(n.value),1)]),_:1},8,["show"])):w("",!0)]),_:1},16,["id","status","multiple","options","placeholder","disabled","value","class"])])}}});function Z(u=null){const s=D(),e=T(),l=()=>({email:u?.email??"",name:u?.name??"",roleNames:u?.roleNames??[]}),{handleSubmit:n,errors:d,isSubmitting:a,resetForm:m,validate:p}=L({validationSchema:I(M),initialValues:l()}),f=()=>{m({values:l(),errors:{}})},{email:h,name:c,roleNames:F}=E(["email","name","roleNames"]);return{name:c,email:h,roleNames:F,errors:d,isSubmitting:a,validateForm:async()=>{const t=await p();return t.valid?{valid:!0,values:t.values}:{valid:!1}},onSubmit:t=>n(t),resetForm:f,handleCreateStore:async(t,i={notify:!0})=>{const{success:r,message:o}=await e.create(t);return i.notify&&(r?s.success(o):s.error(o)),{success:r,message:o}},handleUpdateStore:async(t,i,r={notify:!0})=>{const{success:o,message:v}=await e.update(t,i);return r.notify&&(o?s.success(v):s.error(v)),{success:o,message:v}},handleDeleteStore:async(t,i={notify:!0})=>{const{success:r,message:o}=await e.delete(t);return i.notify&&(r?s.success(o):s.error(o)),{success:r,message:o}}}}export{Y as _,Z as u};
