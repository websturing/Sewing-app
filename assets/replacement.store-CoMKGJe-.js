import{E as o,D as h}from"./index-gyip3Da5.js";import{q as u}from"./index-B-cYlh1f.js";import{a as g}from"./defect.summaryApi-Bar6lMpN.js";import{o as n,n as r,s as t,c as m,a as c}from"./types-CVZIcfwR.js";import{M as S,L as R}from"./metaPagination-BMwnZfrC.js";import{A as l}from"./api.schema-B7NsqcGR.js";const i="/api",p={createTicketReplacement:s=>o.post(`${i}/replacement-request`,{data:s}).then(e=>e.data),createApprovalReplacement:s=>o.post(`${i}/replacement-request/approval`,s).then(e=>e.data),getReplacementListPagination:s=>o.get(`${i}/replacement-request/pagination`,{params:s,paramsSerializer:e=>u.stringify(e,{arrayFormat:"brackets"})}).then(e=>e.data),getReplacementApprovalPagination:s=>o.get(`${i}/replacement-request/role/pagination`,{params:s,paramsSerializer:e=>u.stringify(e,{arrayFormat:"brackets"})}).then(e=>e.data),getHistoriesByReplacementId:s=>o.get(`${i}/replacement-request/histories/replacement/${s}`).then(e=>e.data)},f=n({current:t().nullable(),previous:t().nullable(),next:t().nullable(),color:t(),id:r()}),y=n({id:r(),name:t(),role:t(),step:r(),isFinal:m()}),w=n({id:r(),name:t()}),b=w.extend({steps:c(y)});g(b);const k=n({color:t(),layingPlanningId:r(),totalDefect:r(),totalSize:r(),sizeList:c(n({size:t(),defectQty:r()}))}),A=n({id:r(),createdBy:t(),note:t().nullable(),createdAt:t().nullable(),updatedAt:t().nullable()}),v=n({id:r().optional(),serialNumber:t().nullable().optional(),glNo:t().nullable().optional(),lineNames:c(t()),colors:t(),defectSizes:t(),defectTotal:r(),defectList:c(k),totalSize:r(),requestedBy:t(),createdAt:t(),updatedAt:t(),isApproval:m(),status:n({name:t(),type:t(),class:t()}),notes:c(A),currentStep:r(),workflow:f.nullable().optional()}),d=n({status:m(),message:t(),links:R,meta:S,data:c(v)}),L=n({workflowName:t(),createdBy:t(),stepOrder:r(),note:t().nullable(),role:t(),isFinal:m(),isApproved:m(),createdAt:t().nullable(),updatedAt:t().nullable()}),P=g(c(L));n({perPage:r().nullable().optional(),page:r().nullable().optional(),search:t().nullable().optional()});n({replacementRequestId:r().optional(),note:t().nullable(),action:t()});const B=h("replacementStore",{state:()=>({replacementList:[],remoteSearchResult:[],meta:{},links:{}}),actions:{async createTicketReplacement(s){try{const e=await p.createTicketReplacement(s);return l.parse({success:!0,message:e.message??"Created",data:e.data})}catch(e){const a=e?.response?.data?.message||"Something went wrong";return l.parse({success:!1,message:a})}},async createApprovalReplacement(s){try{const e=await p.createApprovalReplacement(s);return l.parse({success:!0,message:e.message??"Created",data:e.data})}catch(e){const a=e?.response?.data?.message||"Something went wrong";return l.parse({success:!1,message:a})}},async fetchReplacementListPagination(s){try{const e=await p.getReplacementListPagination(s),a=d.parse(e);return s?.search?this.remoteSearchResult=a.data:(this.replacementList=a.data,this.meta=a.meta,this.links=a.links,this.remoteSearchResult=null),l.parse({success:!0,message:e.message??"Succesfully Retrived Data"})}catch(e){const a=e?.response?.data?.message||"Something went wrong";return this.replacementList=[],l.parse({success:!1,message:a})}},async fetchReplacementApprovalPagination(s){try{const e=await p.getReplacementApprovalPagination(s),a=d.parse(e);return s?.search?this.remoteSearchResult=a.data:(this.replacementList=a.data,this.meta=a.meta,this.links=a.links,this.remoteSearchResult=null),l.parse({success:!0,message:e.message??"Succesfully Retrived Data"})}catch(e){const a=e?.response?.data?.message||"Something went wrong";return this.replacementList=[],l.parse({success:!1,message:a})}},async fetchHistoriesByReplacementId(s){try{const e=await p.getHistoriesByReplacementId(s),a=P.parse(e);return l.parse({success:!0,message:a.message??"Retrived Histories Replacement Successfully",data:a.data})}catch(e){const a=e?.response?.data?.message||"Something went wrong";return l.parse({success:!1,message:a})}},clearRemoteSearchResult(){this.remoteSearchResult=null}}});export{B as u};
