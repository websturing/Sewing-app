import{_ as B}from"./BaseButton.vue_vue_type_script_setup_true_lang-DYhLFWIl.js";import{d as S,k,c as g,x as R,e as t,t as _,g as p,a3 as E,L as j,w as v,o as u,l as U,m as x,f as y,r as L,a as e,F as $,H as V,E as w,D as H,p as P,s as G,y as O}from"./index-BoyeRM5B.js";import{A as Y}from"./AlertOutline-EQS8Rt5i.js";import{S as q}from"./SaveArrowRight20Filled-CUQalT4q.js";import{_ as J}from"./BaseInput.vue_vue_type_script_setup_true_lang-Dzufs464.js";import{A as T}from"./api.schema-B7NsqcGR.js";import{c as K}from"./defect.summaryApi-CUJMEH2X.js";import{o as z,s as f,n as Q,a as C}from"./types-CVZIcfwR.js";import{S as X}from"./SearchOutline-BaJLoHcj.js";import{R as Z}from"./RefreshRound-CvZcxyKL.js";import{C as D}from"./ChartPerson20Filled-BtjUdLXu.js";import{F as ee}from"./FolderDetailsReference-BuDQ5HXa.js";import{S as te}from"./SmartHome-Bv5Igxum.js";const le={class:"flex flex-col gap-1"},ae=["status","for"],F=S({__name:"BaseSelectWithError",props:{modelValue:{},options:{},placeholder:{default:"Select option"},clearable:{type:Boolean,default:!0},filterable:{type:Boolean,default:!0},size:{default:"medium"},icon:{default:null},errors:{},label:{},name:{},multiple:{type:Boolean,default:!1},classContent:{}},emits:["update:modelValue"],setup(o,{emit:l}){const a=o,c=l,i=k(()=>a.errors?.[a.name]),s=k(()=>i.value?"error":void 0);return(d,r)=>{const n=y("n-icon"),b=y("n-tooltip");return u(),g("div",le,[d.label?(u(),g("label",{key:0,status:s.value,for:a.name,class:"text-sm font-medium text-gray-700"},_(d.label),9,ae)):R("",!0),t(p(E),{id:a.name,value:a.modelValue,options:a.options,multiple:a.multiple,placeholder:a.placeholder,clearable:a.clearable,filterable:a.filterable,size:a.size,"onUpdate:value":r[0]||(r[0]=m=>c("update:modelValue",m)),class:j([a.classContent,"!min-w-[200px]"]),"max-tag-count":a.multiple?0:void 0,"render-tag":a.multiple?()=>null:void 0},{arrow:v(()=>[i.value?(u(),U(b,{key:0,show:!!i.value,trigger:"hover"},{trigger:v(()=>[t(n,{component:p(Y),color:"red"},null,8,["component"])]),default:v(()=>[x(" "+_(i.value),1)]),_:1},8,["show"])):R("",!0)]),_:1},8,["id","value","options","multiple","placeholder","clearable","filterable","size","class","max-tag-count","render-tag"])])}}}),se={class:"flex flex-col gap-5 !w-[500px]"},ne={class:"flex gap-2 items-end"},oe={class:"flex flex-col"},re={class:"bg-gray-50 border border-gray-200 p-3 rounded-lg"},ie={class:"flex gap-2 flex-wrap mt-2"},de={class:"flex gap-2 justify-end"},ue=S({__name:"LeaderAssignmentForm",setup(o){const l=L(null),a=L(null),c=[{label:"Everybody's Got Something to Hide Except Me and My Monkey",value:"song0",disabled:!0},{label:"Drive My Car",value:"song1"},{label:"Norwegian Wood",value:"song2"},{label:"You Won't See",value:"song3",disabled:!0},{label:"Nowhere Man",value:"song4"},{label:"Think For Yourself",value:"song5"},{label:"The Word",value:"song6"},{label:"Michelle",value:"song7",disabled:!0},{label:"What goes on",value:"song8"},{label:"Girl",value:"song9"},{label:"I'm looking through you",value:"song10"},{label:"In My Life",value:"song11"},{label:"Wait",value:"song12"}];return(i,s)=>{const d=y("n-switch"),r=y("n-tag");return u(),g("div",se,[s[4]||(s[4]=e("div",{class:"mb-5"},[e("p",{class:"text-xl font-semibold"},"Leader Assignment Form"),e("p",null,"A dedicated form interface for assigning leaders to specific production lines.")],-1)),e("div",ne,[t(F,{name:"userId",options:c,label:"Leaders",modelValue:l.value,"onUpdate:modelValue":s[0]||(s[0]=n=>l.value=n),placeholder:"Select Leader"},null,8,["modelValue"]),t(F,{name:"lineId",options:c,multiple:"",label:"Lines",modelValue:a.value,"onUpdate:modelValue":s[1]||(s[1]=n=>a.value=n),placeholder:"Select Lines"},null,8,["modelValue"]),e("div",oe,[s[2]||(s[2]=e("label",{id:"isActive",class:"mb-2 font-semibold"},"Is Active",-1)),t(d,{round:!1,size:"large"})])]),e("div",re,[s[3]||(s[3]=e("p",{class:"text-xs text-gray-400"},"Selected Lines",-1)),e("div",ie,[(u(!0),g($,null,V(a.value,n=>(u(),U(r,{key:n,size:"small",type:"info",round:""},{default:v(()=>[x(_(c.find(b=>b.value===n)?.label),1)]),_:2},1024))),128))])]),e("div",de,[t(B,{label:"Reset",type:"error",quaternary:""}),t(B,{label:"Assign Leader",icon:p(q),"icon-placement":"right",type:"primary"},null,8,["icon"])])])}}}),A="/api",ce={getAssignments:()=>w.get(`${A}/leaders`).then(o=>o.data),createAssign:o=>w.post(`${A}/leaders/assign`,o).then(l=>l.data),createUnassign:o=>w.post(`${A}/leaders/unassign`,o).then(l=>l.data)},N=z({assignAt:f(),unassignAt:f().nullable(),lineId:Q().nullable(),lineName:f().nullable(),createdBy:f(),updatedBy:f().nullable(),lastUpdated:f()}),me=z({leader:f(),activeLines:f(),lastUpdated:f().nullable(),activeDetail:C(N),inactiveDetail:C(N)}),pe=K(C(me)),fe=H("leaderStore",{state:()=>({loading:!1,error:null,AssignmentSummaryByLeader:[]}),actions:{async fetchSummaryByLeader(){this.loading=!0,this.error=null;try{const o=await ce.getAssignments(),l=pe.parse(o);return this.AssignmentSummaryByLeader=l.data,T.parse({success:!0,message:l.message??"loaded"})}catch(o){const l=o?.response?.data?.message||"Something went wrong";return this.error=l,T.parse({success:!1,message:l})}finally{this.loading=!1}}}});function I(){const o=P(),l=fe(),{loading:a,AssignmentSummaryByLeader:c}=G(l);return{isLoading:a,AssignmentSummaryByLeader:c,fetchSummaryByLeader:async(s={notify:!0})=>{const{success:d,message:r}=await l.fetchSummaryByLeader();return s.notify&&(d?o.success(r):o.error(r)),{success:d,message:r}}}}const ge={class:"flex flex-col gap-5"},_e={class:"flex justify-between"},ye={class:"!w-[300px]"},ve={class:"flex gap-3 items-center"},be=S({__name:"SummaryLeaderTable",setup(o){const l=L(""),a=k(()=>{const r=l.value.toLowerCase().trim();return r?(i.value||[]).filter(n=>n.leader?.toLowerCase().includes(r)||n.activeLines?.toLowerCase().includes(r)):i.value||[]}),{isLoading:c,AssignmentSummaryByLeader:i,fetchSummaryByLeader:s}=I(),d=async()=>{await s()};return(r,n)=>{const b=B,m=y("n-skeleton"),W=y("n-table");return u(),g("div",ge,[e("div",_e,[e("div",ye,[t(J,{icon:p(X),placeholder:"Search",modelValue:l.value,"onUpdate:modelValue":n[0]||(n[0]=h=>l.value=h)},null,8,["icon","modelValue"])]),e("div",ve,[t(b,{label:"Refresh",icon:p(Z),onClick:d},null,8,["icon"]),t(b,{label:"Create Leader Assignment",icon:p(D),onClick:d,type:"primary"},null,8,["icon"])])]),t(W,null,{default:v(()=>[n[2]||(n[2]=e("thead",null,[e("tr",null,[e("th",null,"No"),e("th",null,"Leader"),e("th",null,"Line Assignments"),e("th",null,"Last Updated"),e("th",null,"Status")])],-1)),e("tbody",null,[p(c)?(u(),g($,{key:0},V(10,h=>e("tr",{key:h},[e("td",null,[t(m,{text:""})]),e("td",null,[t(m,{text:""})]),e("td",null,[t(m,{text:""})]),e("td",null,[t(m,{text:""})]),e("td",null,[t(m,{text:""})]),e("td",null,[t(m,{text:""})]),e("td",null,[t(m,{text:""})]),e("td",null,[t(m,{text:""})])])),64)):(u(!0),g($,{key:1},V(a.value,(h,M)=>(u(),g("tr",{key:M},[e("td",null,_(M+1),1),e("td",null,_(h.leader),1),e("td",null,_(h.activeLines),1),e("td",null,_(h.lastUpdated),1),e("td",null,[t(b,{label:"Detail",icon:p(ee),onClick:n[1]||(n[1]=()=>{}),tertiary:""},null,8,["icon"])])]))),128))])]),_:1})])}}}),he={class:"flex flex-col gap-10"},xe={class:"flex justify-between items-center"},Le={class:"w-84 flex-auto"},Se={class:"text-xl font-bold mb-1"},we={class:"w-16 flex-auto text-right"},De=S({__name:"LeadersPageView",setup(o){const l=L({title:"Leader Management Module",description:"A centralized interface enabling users to view, create, and maintain leader records assigned across multiple production lines. The module streamlines oversight, improves data governance, and ensures operational visibility by providing a structured workflow for leader placement and line assignments."}),{fetchSummaryByLeader:a}=I();return O(async()=>{await a()}),(c,i)=>{const s=y("n-icon"),d=y("n-breadcrumb-item"),r=y("n-breadcrumb");return u(),g("div",he,[e("div",xe,[e("div",Le,[e("h2",Se,_(l.value.title),1),e("p",null,_(l.value.description),1)]),e("div",we,[t(r,null,{default:v(()=>[t(d,null,{default:v(()=>[t(s,{component:p(te)},null,8,["component"]),i[0]||(i[0]=x(" Home",-1))]),_:1}),t(d,null,{default:v(()=>[t(s,{component:p(D)},null,8,["component"]),i[1]||(i[1]=x(" Leaders ",-1))]),_:1})]),_:1})])]),t(be),t(ue)])}}});export{De as default};
