import{u as U,_ as j}from"./ReplacementTicketDetail.vue_vue_type_script_setup_true_lang-u9c5KDaq.js";import{d as D,c as n,e as t,a,f as c,w as m,o as s,F as g,H as w,L as P,t as y,a4 as B,r as z,y as H,g as r,n as J,m as T,x as M,h as E,I as Q}from"./index-KKLjXh5o.js";import{_ as S}from"./BaseButton.vue_vue_type_script_setup_true_lang-DcrN91Jq.js";import{_ as G}from"./BaseFilter.vue_vue_type_script_setup_true_lang-BvMCgVTY.js";import{u as K}from"./replacement.store-Fxgg6xgP.js";import{F as O}from"./FolderDetails-eV3aw8xa.js";import{a as W,C as X,D as Y}from"./DesignIdeas16Filled-BLSUB0TR.js";import{S as Z}from"./SmartHome-CoCWvi5q.js";import"./BaseIconWithLabel.vue_vue_type_script_setup_true_lang-DyK7j_Xf.js";import"./IosSync-lNu7Q2x1.js";import"./FolderPerson16Regular-swM86aN5.js";import"./BrandAirtable-Qth-oqRa.js";import"./History-Dp9vp-7o.js";import"./BaseInput.vue_vue_type_script_setup_true_lang-C4zdXy1y.js";import"./SearchOutline-BLnz_9Lx.js";import"./DocumentExport-Cueps_nq.js";import"./RefreshRound-Cuk3RQia.js";import"./index-B-cYlh1f.js";import"./_commonjsHelpers-CE1G-McA.js";import"./defect.summaryApi-Bar6lMpN.js";import"./types-CVZIcfwR.js";import"./metaPagination-BMwnZfrC.js";import"./api.schema-B7NsqcGR.js";const ee=["width"],te={key:0},ne=["colspan"],se={key:0,width:"40",class:"text-center font-semibold"},oe={key:1},ae={key:0,width:"40"},le={key:1},ie={class:"flex justify-end mt-4"},re=D({__name:"BaseTable",props:{columns:{},rows:{},meta:{},size:{default:"medium"},isLoading:{type:Boolean,default:!1}},emits:["update:page","update:pageSize"],setup(A,{emit:u}){const o=A,p=u;return(v,f)=>{const x=c("n-empty"),k=c("n-skeleton"),C=c("n-table"),h=c("n-pagination");return s(),n("div",null,[t(C,{size:o.size},{default:m(()=>[a("thead",null,[a("tr",null,[(s(!0),n(g,null,w(o.columns,l=>(s(),n("th",{key:l.key,class:P(l.classTh),width:l.width},y(l.title),11,ee))),128))])]),a("tbody",null,[o.isLoading?(s(),n(g,{key:1},w(10,l=>a("tr",{key:l},[(s(!0),n(g,null,w(o.columns,d=>(s(),n(g,{key:d.key},[d.key==="no"?(s(),n("td",ae,[t(k,{height:30})])):(s(),n("td",le,[t(k,{height:25})]))],64))),128))])),64)):(s(),n(g,{key:0},[o.rows.length==0?(s(),n("tr",te,[a("td",{colspan:o.columns.length,class:"!p-10"},[t(x,{description:"Nothing here yet — start by creating a new record"})],8,ne)])):(s(!0),n(g,{key:1},w(o.rows,(l,d)=>(s(),n("tr",{key:d},[(s(!0),n(g,null,w(o.columns,_=>(s(),n(g,{key:_.key},[_.key==="no"?(s(),n("td",se,y((o.meta.currentPage-1)*o.meta.perPage+d+1),1)):(s(),n("td",oe,[B(v.$slots,_.key,{row:l,index:d,value:l[_.key]},()=>[_.isJoinArray?(s(),n("div",{key:0,class:P(_.classRow)},y(l[_.key]?.join(" · ")),3)):(s(),n("div",{key:1,class:P(_.classRow)},y(l[_.key]),3))])]))],64))),128))]))),128))],64))])]),_:3},8,["size"]),a("div",ie,[t(h,{page:o.meta.currentPage,"page-size":o.meta.perPage,"page-count":o.meta.lastPage,"show-size-picker":"","page-sizes":[1,5,10,20,50],"onUpdate:page":f[0]||(f[0]=l=>p("update:page",l,o.meta.perPage)),"onUpdate:pageSize":f[1]||(f[1]=l=>p("update:pageSize",1,l))},null,8,["page","page-size","page-count"])])])}}}),pe={class:"flex flex-col gap-5"},de={class:"flex flex-col"},me={class:"inline-flex items-center bg-teal-500 px-2 py-0.5 rounded font-semibold text-gray-50 text-xs w-fit"},ce={class:"flex flex-col gap-3"},ue={class:"flex flex-col gap-5"},_e={class:"flex flex-col gap-2"},fe={class:"flex gap-2"},ge={key:0},ye=D({__name:"ReplacementApprovalTable",setup(A){E();const u=z(null),o=z(!1),p=z(!1),v=[{key:"no",title:"No",classTh:"!text-center bg-red-200"},{key:"requestItem",title:"Request Item"},{key:"defectSizes",title:"Sizes"},{key:"defectTotal",title:"Defect Qty",width:30,classTh:"text-center",classRow:"text-center bg-red-400 px-2 py-0.5 rounded font-semibold text-gray-50"},{key:"lineNames",title:"Lines",isJoinArray:!0,classTh:"!text-center",classRow:"text-center"},{key:"actions",title:"Actions"}],{meta:f,isLoading:x,searchReplacementList:k,replacementListFilter:C,selectedReplacementItem:h,handleSearchReplacementApprovalList:l,handleFetchReplacementApprovalPagination:d,selectReplacementItem:_}=U(),I=()=>{l()},q=async N=>{o.value=!0;const e=Date.now();await K().createApprovalReplacement({replacementRequestId:h.value?.id,note:u.value,action:N});const b=Date.now()-e,R=400;b<R&&await new Promise(L=>setTimeout(L,R-b)),o.value=!1,await d(!1,{}),p.value=!1};return H(()=>{d(!0,{})}),(N,e)=>{const b=c("n-input"),R=c("n-card"),L=c("n-spin"),V=c("n-scrollbar"),F=c("n-modal");return s(),n("div",pe,[t(G,{modelValue:r(k),"onUpdate:modelValue":[e[0]||(e[0]=i=>J(k)?k.value=i:null),e[1]||(e[1]=()=>{})],"onClick:export":e[2]||(e[2]=()=>{}),"onClick:refresh":e[3]||(e[3]=i=>r(d)(!0,{})),onInput:I},{actions:m(()=>[...e[10]||(e[10]=[])]),_:1},8,["modelValue"]),t(re,{isLoading:r(x),columns:v,rows:r(C),meta:r(f),size:"small","onUpdate:page":e[4]||(e[4]=(i,$)=>r(d)(!1,{page:i,perPage:$})),"onUpdate:pageSize":e[5]||(e[5]=(i,$)=>r(d)(!1,{page:i,perPage:$}))},{requestItem:m(({row:i})=>[a("div",de,[a("p",me,y(i.glNo),1),a("p",null,y(i.colors),1)])]),actions:m(({index:i})=>[t(S,{label:"Review Request",icon:r(O),tertiary:!0,type:"primary",onClick:$=>(p.value=!0,r(_)(i),u.value=null)},null,8,["icon","onClick"])]),_:1},8,["isLoading","rows","meta"]),t(F,{show:p.value,"onUpdate:show":e[9]||(e[9]=i=>p.value=i),preset:"card",style:"width: 1200px",title:"Approval Replacement Request"},{default:m(()=>[a("div",ce,[t(L,{show:o.value},{description:m(()=>[...e[12]||(e[12]=[T(" Please wait, processing your request ... ",-1)])]),default:m(()=>[t(R,{class:"!shadow !border !border-gray-300"},{default:m(()=>[a("div",ue,[a("div",_e,[e[11]||(e[11]=a("label",{class:"font-semibold"},"Note",-1)),t(b,{value:u.value,"onUpdate:value":e[6]||(e[6]=i=>u.value=i),type:"textarea",placeholder:"Provide additional details if needed"},null,8,["value"])]),a("div",fe,[t(S,{label:"Reject",icon:r(W),type:"error",onClick:e[7]||(e[7]=i=>q("rejected"))},null,8,["icon"]),t(S,{label:"Approve",icon:r(X),type:"success",onClick:e[8]||(e[8]=i=>q("approved"))},null,8,["icon"])])])]),_:1})]),_:1},8,["show"]),t(V,{style:{"max-height":"450px"}},{default:m(()=>[r(h)?(s(),n("div",ge,[t(j,{data:r(h)},null,8,["data"])])):M("",!0)]),_:1})])]),_:1},8,["show"])])}}}),ve={class:"flex flex-col gap-10"},ke={class:"flex justify-between items-center"},xe={class:"w-84 flex-auto"},he={class:"text-xl font-bold mb-1"},we={class:"w-16 flex-auto text-right"},Qe=D({__name:"ReplacementApprovalPageView",setup(A){const u=z({title:"Replacement Request Approval",description:"A dedicated approval interface for validating and authorizing defect-related replacement requests. This module enforces workflow compliance, ensures data integrity, and provides controlled decision-making for all submitted replacement tickets."});return Q({title:u.value.title,meta:[{name:"description",content:u.value.description}]}),(o,p)=>{const v=c("n-icon"),f=c("n-breadcrumb-item"),x=c("n-breadcrumb");return s(),n("div",ve,[a("div",ke,[a("div",xe,[a("h2",he,y(u.value.title),1),a("p",null,y(u.value.description),1)]),a("div",we,[t(x,null,{default:m(()=>[t(f,null,{default:m(()=>[t(v,{component:r(Z)},null,8,["component"]),p[0]||(p[0]=T(" Home",-1))]),_:1}),t(f,null,{default:m(()=>[t(v,{component:r(Y)},null,8,["component"]),p[1]||(p[1]=T(" Replacement Approval ",-1))]),_:1})]),_:1})])]),t(ye)])}}});export{Qe as default};
