import{_ as R}from"./BaseButton.vue_vue_type_script_setup_true_lang-6gotNCYT.js";import{_ as P}from"./BaseInput.vue_vue_type_script_setup_true_lang-BXNYiFAI.js";import{u as B}from"./defect.store-C-Boy_rt.js";import{p as j,s as T,d as L,r as D,k as V,c as n,a as t,e as l,g as x,f as g,w as G,o,F as b,H as y,t as r,l as M,y as U}from"./index-gyip3Da5.js";import{S as q}from"./SearchOutline-DcfiRB9x.js";import{R as z}from"./RefreshRound-Bbu_KeRB.js";import{R as E}from"./Repeat-86tXgYoe.js";import{F as H}from"./FolderDetailsReference-BjRF1myt.js";import"./defect.summaryApi-Bar6lMpN.js";import"./types-CVZIcfwR.js";import"./api.schema-B7NsqcGR.js";function k(){const f=j(),i=B(),{loading:m,summaryGroupLine:h,defectGroupLines:c,defectGroupGlNumber:d}=T(i);return{loading:m,summaryGroupLine:h,defectGroupLines:c,defectGroupGlNumber:d,handleFetchGroupGlNumber:async(_={notify:!0})=>{const{success:a,message:e}=await i.fetchGroupGlNumber();return _.notify&&(a?f.success(e):f.error(e)),{success:a,message:e}},handleFetchSummaryGroupLines:async(_={notify:!0})=>{const{success:a,message:e}=await i.fetchSummaryGroupLines();return _.notify&&(a?f.success(e):f.error(e)),{success:a,message:e}},handleFetchGroupLines:async(_={notify:!0})=>{const{success:a,message:e}=await i.fetchGroupLines();return _.notify&&(a?f.success(e):f.error(e)),{success:a,message:e}}}}const O={class:"flex flex-col gap-3"},A={class:"flex justify-between"},I={class:"!w-[300px]"},J={class:"flex gap-2"},K={class:"text-center"},Q={class:"!bg-red-100 text-center"},W={class:"text-center"},X={class:"text-center"},Y={class:"flex flex-col gap-5"},Z=["colspan"],tt={class:"!text-center !bg-white"},et={class:"!text-center"},st={class:"!text-center !font-bold"},lt={class:"!text-center !text-red-400"},ot={class:"!text-center !font-bold !text-red-400"},nt={class:"!bg-gray-50 !text-center !font-semibold"},at={class:"!bg-gray-50 !text-center !font-bold"},rt=L({__name:"DefectGroupGlNumberTable",setup(f){const i=D(""),m=D(),h=D(!1),{loading:c,defectGroupGlNumber:d,handleFetchGroupGlNumber:w}=k(),N=V(()=>{const a=i.value.toLowerCase().trim();return a?(d.value||[]).filter(e=>e.glNumber?.toLowerCase().includes(a)||e.color?.toLowerCase().includes(a)||e.lineNames?.toLowerCase().includes(a)):d.value||[]}),$=async()=>{await w()},_=a=>{h.value=!0,m.value=d.value[a]};return(a,e)=>{const v=R,p=g("n-skeleton"),C=g("n-table"),F=g("n-modal");return o(),n("div",O,[t("div",A,[t("div",I,[l(P,{icon:x(q),placeholder:"Search",modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=s=>i.value=s)},null,8,["icon","modelValue"])]),t("div",J,[l(v,{label:"Refresh",icon:x(z),onClick:$},null,8,["icon"]),l(v,{label:"Create Request Replacement",icon:x(E),onClick:$,type:"primary"},null,8,["icon"])])]),l(C,null,{default:G(()=>[e[2]||(e[2]=t("thead",null,[t("tr",null,[t("th",{class:"!w-[20px]"},"No"),t("th",{class:"!w-[80px]"},"GL Number"),t("th",null,"Color"),t("th",{class:"!w-[30px]"},"Cut Pieces"),t("th",{class:"!w-[30px] !bg-red-100"},"Defects"),t("th",{class:"!w-[30px]"},"Balance"),t("th",{class:"!w-[200px] !text-center"},"Line"),t("th",{class:"!w-[80px]"},"Status")])],-1)),t("tbody",null,[x(c)?(o(),n(b,{key:0},y(10,s=>t("tr",{key:s},[t("td",null,[l(p,{text:""})]),t("td",null,[l(p,{text:""})]),t("td",null,[l(p,{text:""})]),t("td",null,[l(p,{text:""})]),t("td",null,[l(p,{text:""})]),t("td",null,[l(p,{text:""})]),t("td",null,[l(p,{text:""})]),t("td",null,[l(p,{text:""})])])),64)):(o(!0),n(b,{key:1},y(N.value,(s,u)=>(o(),n("tr",{key:s.glNumber},[t("td",null,r(u+1),1),t("td",null,r(s.glNumber),1),t("td",null,[l(v,{label:s.color,onClick:S=>_(u),quaternary:"",type:"primary"},null,8,["label","onClick"])]),t("td",K,r(s.totalPcs),1),t("td",Q,r(s.totalDefect),1),t("td",W,r(s.totalPcs-s.totalDefect),1),t("td",X,r(s.lineNames),1),t("td",null,[l(v,{label:"Detail",icon:x(H),onClick:S=>_(u),tertiary:""},null,8,["icon","onClick"])])]))),128))])]),_:1}),l(F,{show:h.value,"onUpdate:show":e[1]||(e[1]=s=>h.value=s),preset:"card",style:"width: 1200px",title:`GL-${m.value?.glNumber.toString()} | ${m.value?.lineNames}`},{default:G(()=>[t("div",Y,[(o(!0),n(b,null,y(m.value?.items,s=>(o(),M(C,null,{default:G(()=>[t("thead",null,[t("tr",null,[e[3]||(e[3]=t("th",{class:"!bg-white"},"Color",-1)),t("th",{colspan:(s.items.length??0)+1,class:"!text-center !bg-white !text-blue-600 !font-semibold"},r(s.color),9,Z)]),t("tr",null,[e[4]||(e[4]=t("th",{class:"!bg-white"},"Size",-1)),(o(!0),n(b,null,y(s.items,u=>(o(),n("th",tt,r(u.size),1))),256)),e[5]||(e[5]=t("th",{class:"!bg-white !text-center"},"Total",-1))])]),t("tbody",null,[t("tr",null,[e[6]||(e[6]=t("td",null,"Cut Piece",-1)),(o(!0),n(b,null,y(s.items,u=>(o(),n("td",et,r(u.totalPcs),1))),256)),t("td",st,r(s.totalPcs),1)]),t("tr",null,[e[7]||(e[7]=t("td",null,"Defect",-1)),(o(!0),n(b,null,y(s.items,u=>(o(),n("td",lt,r(u.totalDefect),1))),256)),t("td",ot,r(s.totalDefect),1)]),t("tr",null,[e[8]||(e[8]=t("td",{class:"!bg-gray-50"},"Balance",-1)),(o(!0),n(b,null,y(s.items,u=>(o(),n("td",nt,r(u.totalPcs-u.totalDefect),1))),256)),t("td",at,r((s.totalPcs??0)-(s.totalDefect??0)),1)])])]),_:2},1024))),256))])]),_:1},8,["show","title"])])}}}),ct={class:"!w-[300px]"},it={key:0,class:"flex flex-col gap-1"},dt={class:"flex gap-2 items-end justify-between"},ut={class:"text-gray-400"},mt={class:"text-lg font-bold text-red-600"},ft={class:"text-sm"},_t={class:"flex justify-between"},pt={class:"text-gray-400"},xt={class:"font-semibold"},ht={class:"flex justify-between"},bt={class:"text-gray-400 text-xs"},yt={class:"text-gray-400 text-xs"},gt={key:1,class:"flex flex-col gap-1"},wt={class:"flex gap-2 items-end justify-between"},vt={class:"text-lg font-bold text-red-600"},Gt={class:"text-sm"},$t={class:"flex justify-between"},Dt={class:"font-semibold"},Lt=L({__name:"DefectSummaryCard",setup(f){const{loading:i,summaryGroupLine:m}=k();return(h,c)=>{const d=g("n-skeleton"),w=g("n-card");return o(),n("div",ct,[l(w,{class:"shadow-xs"},{default:G(()=>[x(i)?(o(),n("div",it,[t("div",dt,[t("p",ut,[l(d,{width:80,text:""})]),t("p",mt,[l(d,{width:40,text:""})])]),t("div",ft,[t("div",_t,[t("p",pt,[l(d,{width:80,text:""})]),t("p",xt,[l(d,{width:20,text:""})])])]),c[0]||(c[0]=t("div",{class:"border-b-1 border-gray-200 my-2"},null,-1)),t("div",ht,[t("p",bt,[l(d,{width:80,text:""})]),t("p",yt,[l(d,{width:120,text:""})])])])):(o(),n("div",gt,[t("div",wt,[c[1]||(c[1]=t("p",{class:"text-gray-400"},"Total Defect",-1)),t("p",vt,r(x(m).totalDefect),1)]),t("div",Gt,[t("div",$t,[c[2]||(c[2]=t("p",{class:"text-gray-400"},"Total Lines",-1)),t("p",Dt,r(x(m).totalLines),1)])]),c[3]||(c[3]=t("div",{class:"border-b-1 border-gray-200 my-2"},null,-1)),c[4]||(c[4]=t("div",{class:"flex justify-between"},[t("p",{class:"text-gray-400 text-xs"},"Last Updated"),t("p",{class:"text-gray-400 text-xs"},"November 20, 2025 12:10")],-1))]))]),_:1})])}}}),kt={class:"flex flex-col gap-10"},Ut=L({__name:"DefectPageView",setup(f){const{handleFetchSummaryGroupLines:i,handleFetchGroupGlNumber:m}=k();return U(async()=>{await i(),await m()}),(h,c)=>(o(),n("div",kt,[l(Lt),l(rt)]))}});export{Ut as default};
