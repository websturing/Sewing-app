import{_ as C}from"./BaseButton.vue_vue_type_script_setup_true_lang-DbfVYcZ_.js";import{_ as Y}from"./BaseInput.vue_vue_type_script_setup_true_lang-BZU5i2pL.js";import{d as S}from"./dayjs.min-lasCq60O.js";import{E,D as M,p as R,s as P,d as D,r as z,k as V,c as d,o as r,a as e,e as n,t as m,g as l,f,w as i,F as L,H as h,m as v,q as H,l as N,j as O,y as j}from"./index-DEBi-BvJ.js";import{o as B,s as y,n as k,a as U,c as q}from"./types-CVZIcfwR.js";import{A as T}from"./api.schema-BgX2oz3V.js";import{S as W}from"./SearchOutline-BIjoJMc3.js";import{R as J}from"./RefreshRound-CEM9KvW8.js";import{q as K}from"./index-B-cYlh1f.js";import{G as Q,I as X,C as G,L as Z,O as ee,S as te,H as ne,D as se}from"./IosTrendingUp-OsJPaF6G.js";import{a as oe}from"./line.page-ZJOgfxie.js";import{B as F}from"./BrandAirtable-DxbtvM52.js";import{S as ae}from"./SmartHome-DeyDJwJ7.js";import"./_commonjsHelpers-CE1G-McA.js";import"./stockin.api.schema-DJB3WlbE.js";const le="/api",re={getAttendanceByLine:(_,c)=>E.get(`${le}/attendance/group/line/${_}`,{params:c,paramsSerializer:t=>K.stringify(t,{arrayFormat:"brackets"})}).then(t=>t.data)},ie=B({id:k().optional(),attendanceDate:y(),employeeCode:y(),lineId:k(),lineName:y(),checkInTime:y().nullable(),checkOutTime:y().nullable(),status:y(),userName:y(),deviceName:y().nullable()}),de=B({status:q(),message:y(),data:U(ie)}),ce=M("attendance",{state:()=>({groupLine:[],isLoading:!1,error:null}),actions:{async fetchGroupLine(_){this.isLoading=!0,this.error=null;try{const c=await re.getAttendanceByLine(_,{}),t=de.parse(c);return this.groupLine=t.data,T.parse({success:!0,message:t.message??"Attendances By Group Line loaded",data:{attendanceGroupLine:t.data}})}catch(c){const t=c?.response?.data?.message||"Something went wrong";return this.error=t,T.parse({success:!1,message:t})}finally{this.isLoading=!1}}}});function ue(){const _=R(),c=ce(),{groupLine:t,isLoading:u}=P(c);return{groupLine:t,isLoading:u,handleFetch:async(g={notify:!0},p)=>{const{success:b,message:a}=await c.fetchGroupLine(p);g.notify&&(b?_.success(a):_.error(a))}}}const pe={class:"flex flex-col gap-3"},me={class:"flex justify-between items-center"},_e={class:"font-semibold"},fe={class:"flex gap-2 justify-end"},ge={key:1},xe=D({__name:"AttendancesGroupLineTable",props:{groupLine:{},isLoading:{type:Boolean,default:!0}},setup(_){const c=S(new Date).format("MMMM DD, YYYY"),t=z(""),u=_,o=V(()=>t.value?u.groupLine.filter(g=>g.userName.toLowerCase().includes(t.value.toLowerCase())||g.employeeCode.toLowerCase().includes(t.value.toLowerCase())):u.groupLine);return(g,p)=>{const b=f("n-table");return r(),d("div",pe,[e("div",me,[e("p",_e,"Attendance List | "+m(l(c)),1),e("div",fe,[n(Y,{icon:l(W),placeholder:"Search",modelValue:t.value,"onUpdate:modelValue":p[0]||(p[0]=a=>t.value=a)},null,8,["icon","modelValue"]),n(C,{label:"Refresh",icon:l(J),onClick:p[1]||(p[1]=()=>{})},null,8,["icon"])])]),n(b,null,{default:i(()=>[p[3]||(p[3]=e("thead",null,[e("tr",null,[e("th",null,"Employee ID"),e("th",null,"Employee Name"),e("th",null,"Date"),e("th",null,"Status"),e("th",null,"Check-in Time"),e("th",null,"Check-out Time")])],-1)),e("tbody",null,[g.isLoading?(r(),d("tr",ge,[...p[2]||(p[2]=[e("td",{colspan:"6",class:"!text-center py-5"}," Loading... ",-1)])])):(r(!0),d(L,{key:0},h(o.value,a=>(r(),d("tr",{key:a.id},[e("td",null,m(a.employeeCode),1),e("td",null,m(a.userName),1),e("td",null,m(a.attendanceDate),1),e("td",null,m(a.status),1),e("td",null,m(a.checkInTime||"N/A"),1),e("td",null,m(a.checkOutTime||"N/A"),1)]))),128))])]),_:1})])}}}),ye={class:"flex items-center gap-2"},be={class:"flex items-center gap-5"},Le={class:"bg-green-50 rounded px-3"},he=D({__name:"EmployeeAttendanceCard",setup(_){return(c,t)=>{const u=f("n-icon"),o=f("n-card");return r(),d("div",null,[n(o,null,{default:i(()=>[e("div",ye,[n(u,{component:l(Q),size:"24"},null,8,["component"]),t[0]||(t[0]=e("p",null,"Employee Attend",-1))]),t[3]||(t[3]=e("p",{class:"text-3xl font-bold mt-2"},"125",-1)),e("div",be,[t[2]||(t[2]=e("p",null,"Last Week",-1)),e("p",Le,[n(u,{size:"16",component:l(X),class:"text-green-500"},null,8,["component"]),t[1]||(t[1]=v(" 2,5% ",-1))])])]),_:1})])}}}),ve={class:"flex items-center gap-2"},$e=D({__name:"EmployeeLeaderCard",setup(_){return(c,t)=>{const u=f("n-icon"),o=f("n-card");return r(),d("div",null,[n(o,null,{default:i(()=>[e("div",ve,[n(u,{component:l(G),size:"24"},null,8,["component"]),t[0]||(t[0]=e("p",null,"Leader",-1))]),t[1]||(t[1]=e("p",{class:"text-3xl font-bold mt-2"}," Administrator ",-1))]),_:1})])}}}),Ce={class:"flex flex-col gap-5"},De={class:"flex gap-2 flex-wrap"},Se=["colspan"],Ae={class:"!text-center"},we={class:"font-semibold !text-center"},Ne={class:"!text-red-400 !text-center font-semibold"},ke={class:"!bg-gray-50 !text-center"},Te=D({__name:"LineGlSummary",props:{data:{default:()=>[]}},setup(_){const c=_,t=z(null);return H(()=>c.data,u=>{u.length>0&&!t.value&&(t.value=u[0].glNo)},{immediate:!0}),(u,o)=>{const g=f("n-table"),p=f("n-tab-pane"),b=f("n-tabs");return r(),d("div",Ce,[n(b,{value:t.value,"onUpdate:value":o[0]||(o[0]=a=>t.value=a),type:"card",animated:""},{default:i(()=>[(r(!0),d(L,null,h(c.data,a=>(r(),N(p,{key:a.glNo,name:a.glNo,tab:`GL-${a.glNo.toString()}`},{default:i(()=>[e("div",De,[(r(!0),d(L,null,h(a.colors,x=>(r(),N(g,{class:"flex-1"},{default:i(()=>[e("thead",null,[e("tr",null,[o[1]||(o[1]=e("th",null,"Color",-1)),e("th",{colspan:x.sizes.length,class:"!text-center"},m(x.color),9,Se)]),e("tr",null,[o[2]||(o[2]=e("th",null,"Size",-1)),(r(!0),d(L,null,h(x.sizes,s=>(r(),d("th",Ae,m(s.size),1))),256))])]),e("tbody",null,[e("tr",null,[o[3]||(o[3]=e("td",null,"CUT PIECE IN",-1)),(r(!0),d(L,null,h(x.sizes,s=>(r(),d("td",we,m(s.pcs),1))),256))]),e("tr",null,[o[4]||(o[4]=e("td",null,"DEFECT",-1)),(r(!0),d(L,null,h(x.sizes,s=>(r(),d("td",Ne,m(s.defect),1))),256))]),e("tr",null,[o[5]||(o[5]=e("td",{class:"!bg-gray-50"},"DIFF",-1)),(r(!0),d(L,null,h(x.sizes,s=>(r(),d("td",ke,m(Number(s.pcs)-Number(s.defect)),1))),256))])])]),_:2},1024))),256))])]),_:2},1032,["name","tab"]))),128))]),_:1},8,["value"])])}}}),Fe={class:"flex flex-col gap-5"},ze={class:"flex flex-col gap-10"},Be={class:"flex items-center gap-4"},Ge={class:"bg-blue-50 pl-3 pr-3 pt-3 pb-2 rounded-xl"},Ie={class:"flex flex-col gap-2"},Ye={class:"text-xl font-bold"},Ee={class:"flex gap-4 items-center"},Me={class:"flex gap-2 items-center bg-gray-100 px-4 rounded-lg"},Re={class:"text-gray-700"},Pe={class:"flex gap-2 items-center bg-teal-100 px-4 rounded-lg"},Ve={class:"w-16 flex-auto text-right"},He={class:"flex gap-1"},Oe={class:"flex flex-col gap-5"},je={class:"flex gap-5 items-end"},Ue={class:"flex-1"},qe={class:"lg:w-80 xl:w-96 flex flex-col gap-2"},We={class:"bg-gray-50 rounded-lg p-5"},ct=D({__name:"LinesDetailPageView",setup(_){const t=O().params.id,{line:u,lineStockInSummary:o,handleFetchById:g}=oe(),{groupLine:p,isLoading:b,handleFetch:a}=ue();return j(()=>{if(t){const x=S().format("YYYY-MM-DD"),s=S().subtract(14,"day").format("YYYY-MM-DD");g({notify:!0},{id:t,startDate:s,endDate:x}),a({notify:!1},t)}}),(x,s)=>{const $=f("n-icon"),A=f("n-breadcrumb-item"),I=f("n-breadcrumb"),w=f("n-card");return r(),d("div",Fe,[n(w,null,{default:i(()=>[e("div",ze,[e("div",Be,[e("div",Ge,[n($,{size:"48"},{default:i(()=>[n(l(F))]),_:1})]),e("div",Ie,[e("p",Ye," Line "+m(l(u)?.name),1),e("div",Ee,[e("div",Me,[n($,{size:"14",class:"text-gray-700"},{default:i(()=>[n(l(Z))]),_:1}),e("p",Re,m(l(u)?.location),1)]),e("div",Pe,[n($,{size:"16",class:"text-green-800"},{default:i(()=>[n(l(ee))]),_:1}),s[0]||(s[0]=e("p",{class:"text-teal-700"},"Online",-1))])])]),e("div",Ve,[n(I,null,{default:i(()=>[n(A,null,{default:i(()=>[n($,{component:l(ae)},null,8,["component"]),s[1]||(s[1]=v(" Home",-1))]),_:1}),n(A,null,{default:i(()=>[n($,{component:l(F)},null,8,["component"]),s[2]||(s[2]=v(" Lines ",-1))]),_:1})]),_:1})])]),e("div",He,[n(C,{icon:l(te)},{default:i(()=>[...s[3]||(s[3]=[v("Attendances",-1)])]),_:1},8,["icon"]),n(C,{icon:l(G)},{default:i(()=>[...s[4]||(s[4]=[v("Leaders",-1)])]),_:1},8,["icon"]),n(C,{icon:l(ne)},{default:i(()=>[...s[5]||(s[5]=[v("History GL Numbers",-1)])]),_:1},8,["icon"]),n(C,{icon:l(se)},{default:i(()=>[...s[6]||(s[6]=[v("Devices",-1)])]),_:1},8,["icon"])])])]),_:1}),n(w,{class:"shadow-sm"},{default:i(()=>[e("div",Oe,[e("div",je,[e("div",Ue,[n(Te,{data:l(o)},null,8,["data"])]),e("div",qe,[n($e),n(he)])]),e("div",We,[n(xe,{groupLine:l(p),isLoading:l(b)},null,8,["groupLine","isLoading"])])])]),_:1})])}}});export{ct as default};
