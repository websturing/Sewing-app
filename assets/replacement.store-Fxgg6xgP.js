import{E as o,D as R}from"./index-KKLjXh5o.js";import{q as g}from"./index-B-cYlh1f.js";import{a as u}from"./defect.summaryApi-Bar6lMpN.js";import{o as c,n as r,s as t,c as m,a as l}from"./types-CVZIcfwR.js";import{M as y,L as f}from"./metaPagination-BMwnZfrC.js";import{A as n}from"./api.schema-B7NsqcGR.js";const i="/api",p={createTicketReplacement:s=>o.post(`${i}/replacement-request`,{data:s}).then(e=>e.data),createApprovalReplacement:s=>o.post(`${i}/replacement-request/approval`,s).then(e=>e.data),getReplacementListPagination:s=>o.get(`${i}/replacement-request/pagination`,{params:s,paramsSerializer:e=>g.stringify(e,{arrayFormat:"brackets"})}).then(e=>e.data),getReplacementApprovalPagination:s=>o.get(`${i}/replacement-request/role/pagination`,{params:s,paramsSerializer:e=>g.stringify(e,{arrayFormat:"brackets"})}).then(e=>e.data),getHistoriesByReplacementId:s=>o.get(`${i}/replacement-request/histories/replacement/${s}`).then(e=>e.data),getTicketTrackBySerial:s=>o.get(`${i}/replacement-request/status/serial-number/${s}`).then(e=>e.data)},k=c({current:t().nullable(),previous:t().nullable(),next:t().nullable(),color:t(),id:r()}),w=c({id:r(),name:t(),role:t(),step:r(),isFinal:m()}),b=c({id:r(),name:t()}),v=b.extend({steps:l(w)});u(v);const A=c({color:t(),layingPlanningId:r(),totalDefect:r(),totalSize:r(),sizeList:l(c({size:t(),defectQty:r()}))}),T=c({id:r(),createdBy:t(),note:t().nullable(),createdAt:t().nullable(),updatedAt:t().nullable()}),h=c({id:r().optional(),serialNumber:t().nullable().optional(),glNo:t().nullable().optional(),lineNames:l(t()),colors:t(),defectSizes:t(),defectTotal:r(),defectList:l(A),totalSize:r(),requestedBy:t(),createdAt:t(),updatedAt:t(),isApproval:m(),status:c({name:t(),type:t(),class:t()}),notes:l(T),currentStep:r(),workflow:k.nullable().optional()}),d=c({status:m(),message:t(),links:f,meta:y,data:l(h)}),S=c({workflowName:t(),createdBy:t(),stepOrder:r(),note:t().nullable(),role:t(),isFinal:m(),isApproved:m(),createdAt:t().nullable(),updatedAt:t().nullable()}),L=h.extend({timeline:l(S)}),q=u(l(S)),P=u(L);c({perPage:r().nullable().optional(),page:r().nullable().optional(),search:t().nullable().optional()});c({replacementRequestId:r().optional(),note:t().nullable(),action:t()});const W=R("replacementStore",{state:()=>({replacementList:[],remoteSearchResult:[],meta:{},links:{}}),actions:{async createTicketReplacement(s){try{const e=await p.createTicketReplacement(s);return n.parse({success:!0,message:e.message??"Created",data:e.data})}catch(e){const a=e?.response?.data?.message||"Something went wrong";return n.parse({success:!1,message:a})}},async createApprovalReplacement(s){try{const e=await p.createApprovalReplacement(s);return n.parse({success:!0,message:e.message??"Created",data:e.data})}catch(e){const a=e?.response?.data?.message||"Something went wrong";return n.parse({success:!1,message:a})}},async fetchReplacementListPagination(s){try{const e=await p.getReplacementListPagination(s),a=d.parse(e);return s?.search?this.remoteSearchResult=a.data:(this.replacementList=a.data,this.meta=a.meta,this.links=a.links,this.remoteSearchResult=null),n.parse({success:!0,message:e.message??"Succesfully Retrived Data"})}catch(e){const a=e?.response?.data?.message||"Something went wrong";return this.replacementList=[],n.parse({success:!1,message:a})}},async fetchReplacementApprovalPagination(s){try{const e=await p.getReplacementApprovalPagination(s),a=d.parse(e);return s?.search?this.remoteSearchResult=a.data:(this.replacementList=a.data,this.meta=a.meta,this.links=a.links,this.remoteSearchResult=null),n.parse({success:!0,message:e.message??"Succesfully Retrived Data"})}catch(e){const a=e?.response?.data?.message||"Something went wrong";return this.replacementList=[],n.parse({success:!1,message:a})}},async fetchHistoriesByReplacementId(s){try{const e=await p.getHistoriesByReplacementId(s),a=q.parse(e);return n.parse({success:!0,message:a.message??"Retrived Histories Replacement Successfully",data:a.data})}catch(e){const a=e?.response?.data?.message||"Something went wrong";return n.parse({success:!1,message:a})}},async fetchTicketTrackBySerial(s){try{const e=await p.getTicketTrackBySerial(s),a=P.parse(e);return n.parse({success:!0,message:a.message??"Retrived Histories Replacement Successfully",data:a.data})}catch(e){const a=e?.response?.data?.message||"Something went wrong";return n.parse({success:!1,message:a})}},clearRemoteSearchResult(){this.remoteSearchResult=null}}});export{W as u};
