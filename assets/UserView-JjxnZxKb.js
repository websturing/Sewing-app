import{_ as O}from"./BaseAdvanceFilter.vue_vue_type_script_setup_true_lang-Bm5gWyUL.js";import{_ as $}from"./BaseButton.vue_vue_type_script_setup_true_lang-DbfVYcZ_.js";import{_ as K}from"./BaseDatable.vue_vue_type_script_setup_true_lang-D2NlTjZz.js";import{_ as L}from"./BaseDataTableButton.vue_vue_type_script_setup_true_lang-Bpm_f_E-.js";import{d as B,l as R,o as x,w as f,f as y,m as E,t as P,e as n,g as o,Q,s as Y,k as G,r as C,q as M,i as u,K as U,y as J,c as F,a as i,n as T,N as V,I as W}from"./index-DEBi-BvJ.js";import{f as X}from"./dateRangeFormaterNaive-ClR-GZjc.js";import{a as Z}from"./user.form-3vRFPgJx.js";import{_ as ee}from"./UserFormView.vue_vue_type_script_setup_true_lang-CuzD8WTu.js";import{C as te}from"./Create-C8LiOOm6.js";import{M as ae,P as oe,T as ne}from"./Password16Regular-C8yJzEiQ.js";import{S as le}from"./SmartHome-DeyDJwJ7.js";import{U as se}from"./UserMultiple-BRByJN88.js";import"./BaseInput.vue_vue_type_script_setup_true_lang-BZU5i2pL.js";import"./SearchOutline-BIjoJMc3.js";import"./DocumentExport-CPKaK8dM.js";import"./RefreshRound-CEM9KvW8.js";import"./DocumentEdit16Filled-BLOubJK8.js";import"./EyeOutline-Dlih17M3.js";import"./useFieldWrapper-CvDOBc6Z.js";import"./vee-validate-CSvwRU0x.js";import"./user.schema-CIDyvkVa.js";import"./employeeSchema-C1syi6vV.js";import"./api.schema-BgX2oz3V.js";import"./types-CVZIcfwR.js";import"./vee-validate-zod-CtNfBwNG.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Role-CrxINjmf.js";import"./SaveAnnotation-CbntLWFr.js";import"./FormNew28Regular-DHCdZHEr.js";const ie=B({__name:"BaseDropdown",props:{label:{},icon:{},type:{default:"default"},size:{default:"medium"},disabled:{type:Boolean,default:!1},block:{type:Boolean},circle:{type:Boolean},tertiary:{type:Boolean},quaternary:{type:Boolean},loading:{type:Boolean},tooltip:{},options:{}},emits:["select","click"],setup(l,{emit:a}){const t=l,r=a;function d(c){r("select",c)}return(c,g)=>{const h=y("n-tooltip");return x(),R(o(Q),{options:t.options,trigger:"click",onSelect:d},{default:f(()=>[t.tooltip?(x(),R(h,{key:0,trigger:"hover"},{trigger:f(()=>[n($,{label:t.label,icon:t.icon,type:t.type,size:t.size,quaternary:!0,circle:!0,disabled:t.disabled},null,8,["label","icon","type","size","disabled"])]),default:f(()=>[E(" "+P(t.tooltip),1)]),_:1})):(x(),R($,{key:1,label:t.label,icon:t.icon,type:t.type,size:t.size,text:!0,quaternary:!0,circle:!1,disabled:t.disabled},null,8,["label","icon","type","size","disabled"]))]),_:1},8,["options"])}}});function re(){const l=Z(),{meta:a,links:t,search:r,loading:d,data:c}=Y(l),g=G(()=>l.searchedItems),h=C(),z=C(null),N=[{title:"No",key:"index",width:60,render:(e,s)=>(a.value.currentPage-1)*a.value.perPage+s+1},{title:"Name",key:"name"},{title:"Email",key:"email"},{title:"Employee code",key:"employeeCode",render:e=>e.employee?e.employee.employeeCode:u(U,{type:"warning",size:"small"},{default:()=>"Unassigned"})},{title:"Department",key:"department",render:e=>e.employee?e.employee.department:u(U,{type:"info",size:"small"},{default:()=>"Unassigned"})},{title:"Roles",key:"roleNames",render:e=>!e.roleNames||e.roleNames.length===0?u(U,{type:"error",size:"small"},{default:()=>"No Access Role"}):e.roleNames.map(s=>u(U,{color:{color:s.color},class:"mr-1"},{default:()=>s.name}))},{title:"Actions",key:"actions",width:150}];M(r,async e=>{await l.searchOrFetch(e)}),M(z,async e=>{if(e){const s=X(e);s&&(alert(),l.fetch({page:2,dateFrom:s[0],dateTo:s[1]}))}});const b=async e=>{await l.fetch({page:e})},v=async e=>{await l.fetch({page:1,perPage:e})},w=async()=>{await l.fetch()};function k(e){h.value=e}function D(e){l.delete(e)}return{data:c,search:r,dateRange:z,loading:d,columns:N,rows:g,meta:a,links:t,editRow:h,handleEdit:k,handleDelete:D,handleFetch:w,handlePageChange:b,handlePageSizeChange:v}}const ce={class:"flex flex-col gap-5"},de={class:"flex gap-10"},pe={class:"flex-1"},me={class:""},ue={class:"flex gap-2"},fe={class:"flex justify-end mt-4"},_e=B({__name:"UserTable",setup(l){const a=C(!1),t=C(),r=()=>{a.value=!1,k()},d=()=>{a.value=!0},c=[{label:"Change password",key:"password",icon:()=>u(V,{size:20},()=>u(oe))},{label:"Change Roles",key:"role",icon:()=>u(V,{size:20},()=>u(ne))}],g=_=>{console.log("Selected:",_)},{columns:h,rows:z,loading:N,search:b,dateRange:v,meta:w,handleFetch:k,handleDelete:D,handlePageChange:e,handlePageSizeChange:s}=re(),q=()=>{alert("this feature coming soon")},I=_=>{const p=_.roleNames.map(S=>S.name.toLowerCase());t.value={..._,roleNames:p},a.value=!0},A=()=>{t.value={}},H=_=>{D(_)};return J(async()=>{await k()}),(_,p)=>{const S=y("n-pagination"),j=y("n-modal");return x(),F("div",ce,[i("div",de,[i("div",pe,[n(O,{modelValue:o(b),"onUpdate:modelValue":p[0]||(p[0]=m=>T(b)?b.value=m:null),dateRange:o(v),"onUpdate:dateRange":p[1]||(p[1]=m=>T(v)?v.value=m:null),"onClick:export":q,"onClick:refresh":o(k)},null,8,["modelValue","dateRange","onClick:refresh"])]),i("div",me,[n($,{label:"Create User",icon:o(te),type:"primary",onClick:d},null,8,["icon"])])]),n(K,{columns:o(h),data:o(z),loading:o(N)},{actions:f(({row:m})=>[i("div",ue,[n(L,{row:m,"label-button-delete":"Delete","onClick:edit":I,"onClick:delete":we=>H(m.id)},null,8,["row","onClick:delete"]),n(ie,{tooltip:"More Actions",icon:o(ae),options:c,onSelect:g},null,8,["icon"])])]),_:1},8,["columns","data","loading"]),i("div",fe,[n(S,{page:o(w).currentPage,"page-size":o(w).perPage,"page-count":o(w).lastPage,"page-sizes":[5,10,20,50],"onUpdate:page":o(e),"onUpdate:pageSize":o(s)},null,8,["page","page-size","page-count","onUpdate:page","onUpdate:pageSize"])]),n(j,{show:a.value,"onUpdate:show":p[2]||(p[2]=m=>a.value=m),closable:!1,preset:"card",style:{width:"900px"},"on-after-leave":A},{default:f(()=>[n(ee,{onSubmitted:r,"after-submit":"emit",initialData:t.value},null,8,["initialData"])]),_:1},8,["show"])])}}}),ge={class:"flex flex-col gap-8"},he={class:"flex justify-between items-center"},ye={class:"w-84 flex-auto"},be={class:"text-xl font-bold mb-1"},ve={class:"w-16 flex-auto text-right"},We=B({__name:"UserView",setup(l){const a=C({title:"Users",description:"The User module provides a centralized system to manage application accounts and authentication. It allows administrators to create, edit, and deactivate user accounts while maintaining secure access to the platform. This module supports role assignments, ensuring that users have the right access level and a seamless login experience."});return W({title:a.value.title,meta:[{name:"description",content:a.value.description}]}),(t,r)=>{const d=y("n-icon"),c=y("n-breadcrumb-item"),g=y("n-breadcrumb");return x(),F("div",ge,[i("div",he,[i("div",ye,[i("h2",be,P(a.value.title),1),i("p",null,P(a.value.description),1)]),i("div",ve,[n(g,null,{default:f(()=>[n(c,null,{default:f(()=>[n(d,{component:o(le)},null,8,["component"]),r[0]||(r[0]=E(" Home",-1))]),_:1}),n(c,null,{default:f(()=>[n(d,{component:o(se)},null,8,["component"])]),_:1})]),_:1})])]),n(_e)])}}});export{We as default};
