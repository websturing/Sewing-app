import{_ as A}from"./BaseInput.vue_vue_type_script_setup_true_lang-D3i28-lg.js";import{_ as $}from"./BaseDatable.vue_vue_type_script_setup_true_lang-aMYkhq3N.js";import{_}from"./BaseButton.vue_vue_type_script_setup_true_lang-_9mUbHs3.js";import{E as N,D as V,p as B,s as F,d as w,r as k,c as v,a as c,e as s,g as n,f as u,o as L,y as M,t as y,w as f,m as b}from"./index-CjlGo7ug.js";import{q as U}from"./index-B-cYlh1f.js";import{s as j}from"./stockin.api.schema-DJB3WlbE.js";import{M as q,L as E,A as S}from"./api.schema-BgX2oz3V.js";import{o as x,s as g,n as D,a as G,c as H}from"./types-CVZIcfwR.js";import{S as I}from"./SearchOutline-eSMXyKSu.js";import{R as O}from"./RefreshRound-D3VjWnmM.js";import{C as J}from"./Create-D9twzlbx.js";import{S as K}from"./SmartHome-DU0sauZw.js";import{B as Q}from"./BrandAirtable-C_t38O45.js";import"./_commonjsHelpers-CE1G-McA.js";const W="/api",X={getlines:o=>N.get(`${W}/lines`,{params:o,paramsSerializer:e=>U.stringify(e,{arrayFormat:"brackets"})}).then(e=>e.data)},Y=x({id:D().optional(),name:g().min(1,"Line name is required"),location:g().nullable(),latestStockin:j.nullable()}),Z=G(Y),ee=x({message:g(),data:Z,links:E,meta:q,status:H()}),C=V("lines",{state:()=>({data:[],meta:{},links:{},loading:!1,error:null}),actions:{async fetchLines(o){this.loading=!0,this.error=null;try{const e=await X.getlines(o),t=ee.parse(e);return this.data=t.data,this.meta=t.meta,this.links=t.links,S.parse({success:!0,message:t.message??"Lines loaded"})}catch(e){const t=e?.response?.data?.message||"Something went wrong";return this.error=t,S.parse({success:!1,message:t})}finally{this.loading=!1}}}});function P(){const o=B(),e=C();return{handleFetch:async(d={notify:!0},i)=>{const{success:a,message:r}=await e.fetchLines(i);return d.notify&&(a?o.success(r):o.error(r)),{success:a,message:r}}}}function ae(){const o=C(),{data:e,loading:t,meta:d,links:i}=F(o),{handleFetch:a}=P();return{rows:e,loading:t,meta:d,links:i,handleFetch:a,handlePageChange:async l=>{await a({notify:!1},{page:l})},handlePageSizeChange:async l=>{await a({notify:!1},{page:1,perPage:l})},handleRefresh:async()=>{await a({notify:!1},{})}}}const te={class:"flex flex-col gap-3"},ne={class:"flex justify-between"},se={class:"flex gap-2"},oe={class:"flex justify-end mt-4"},ie=w({__name:"LinesTable",setup(o){const e=k(""),t=[{title:"No",key:"index",width:60,render:(l,m)=>(a.value.currentPage-1)*a.value.perPage+m+1},{title:"Name",key:"name"},{title:"Location",key:"location"},{title:"Current GL Number",key:"current_gl_no",render:l=>l.latestStockin?.glNo??"-"},{title:"Color",key:"color",render:l=>l.latestStockin?.color??"-"}],{loading:d,rows:i,meta:a,handlePageChange:r,handlePageSizeChange:p,handleRefresh:h}=ae();return(l,m)=>{const z=A,R=u("n-pagination");return L(),v("div",te,[c("div",ne,[c("div",null,[s(z,{icon:n(I),placeholder:"Search",modelValue:e.value,"onUpdate:modelValue":m[0]||(m[0]=T=>e.value=T)},null,8,["icon","modelValue"])]),c("div",se,[s(_,{label:"Refresh",icon:n(O),onClick:n(h),tertiary:!0,type:"warning"},null,8,["icon","onClick"]),s(_,{label:"Create Line",icon:n(J),onClick:m[1]||(m[1]=()=>{}),tertiary:!1,type:"primary"},null,8,["icon"])])]),s($,{columns:t,data:n(i),loading:n(d)},null,8,["data","loading"]),c("div",oe,[s(R,{page:n(a).currentPage,"page-size":n(a).perPage,"page-count":n(a).lastPage,"page-sizes":[5,10,20,50],"onUpdate:page":n(r),"onUpdate:pageSize":n(p)},null,8,["page","page-size","page-count","onUpdate:page","onUpdate:pageSize"])])])}}}),re={class:"flex flex-col gap-10"},le={class:"flex justify-between items-center"},ce={class:"w-84 flex-auto"},de={class:"text-xl font-bold mb-1"},me={class:"w-16 flex-auto text-right"},Ce=w({__name:"LinesPageView",setup(o){const e=k({title:"Sewing Line Management",description:"An intuitive dashboard to manage and monitor sewing lines. Each line displays active GL Numbers, colors, and size distributions â€” giving supervisors a clear picture of production flow and operator workload. The interface focuses on fast navigation, status clarity, and easy data access for daily line coordination."}),{handleFetch:t}=P();return M(()=>{t({notify:!0},{search:""})}),(d,i)=>{const a=u("n-icon"),r=u("n-breadcrumb-item"),p=u("n-breadcrumb");return L(),v("div",re,[c("div",le,[c("div",ce,[c("h2",de,y(e.value.title),1),c("p",null,y(e.value.description),1)]),c("div",me,[s(p,null,{default:f(()=>[s(r,null,{default:f(()=>[s(a,{component:n(K)},null,8,["component"]),i[0]||(i[0]=b(" Home",-1))]),_:1}),s(r,null,{default:f(()=>[s(a,{component:n(Q)},null,8,["component"]),i[1]||(i[1]=b(" Lines ",-1))]),_:1})]),_:1})])]),s(ie)])}}});export{Ce as default};
