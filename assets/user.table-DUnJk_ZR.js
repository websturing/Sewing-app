import{f as R}from"./dateRangeFormaterNaive-ClR-GZjc.js";import{u as P}from"./user.store-BTCPniS8.js";import{s as z,k as C,r as c,q as m,i as n,K as r}from"./index-gyip3Da5.js";function E(){const t=P(),{meta:s,links:d,search:o,loading:u,data:f}=z(t),p=C(()=>t.searchedItems),l=c(),i=c(null),y=[{title:"No",key:"index",width:60,render:(e,a)=>(s.value.currentPage-1)*s.value.perPage+a+1},{title:"Name",key:"name"},{title:"Email",key:"email"},{title:"Employee code",key:"employeeCode",render:e=>e.employee?e.employee.employeeCode:n(r,{type:"warning",size:"small"},{default:()=>"Unassigned"})},{title:"Department",key:"department",render:e=>e.employee?e.employee.department:n(r,{type:"info",size:"small"},{default:()=>"Unassigned"})},{title:"Roles",key:"roleNames",render:e=>!e.roleNames||e.roleNames.length===0?n(r,{type:"error",size:"small"},{default:()=>"No Access Role"}):e.roleNames.map(a=>n(r,{color:{color:a.color},class:"mr-1"},{default:()=>a.name}))},{title:"Actions",key:"actions",width:150}];m(o,async e=>{await t.searchOrFetch(e)}),m(i,async e=>{if(e){const a=R(e);a&&(alert(),t.fetch({page:2,dateFrom:a[0],dateTo:a[1]}))}});const h=async e=>{await t.fetch({page:e})},g=async e=>{await t.fetch({page:1,perPage:e})},k=async()=>{await t.fetch()};function N(e){l.value=e}function w(e){t.delete(e)}return{data:f,search:o,dateRange:i,loading:u,columns:y,rows:p,meta:s,links:d,editRow:l,handleEdit:N,handleDelete:w,handleFetch:k,handlePageChange:h,handlePageSizeChange:g}}export{E as u};
