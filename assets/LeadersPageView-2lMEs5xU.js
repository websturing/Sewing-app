import{I as N}from"./InputLabelWithError-Ceqw5_dg.js";import{d as w,c as f,a as e,e as t,o as _,E as b,D as M,p as P,s as j,r as T,k as E,g as u,f as g,w as L,F as B,H as k,t as y,y as H,m as C}from"./index-By4FsIyq.js";import{_ as I}from"./BaseButton.vue_vue_type_script_setup_true_lang-D8pUw1Xn.js";import{_ as z}from"./BaseInput.vue_vue_type_script_setup_true_lang-DbpAcvkE.js";import{A as $}from"./api.schema-B7NsqcGR.js";import{c as O}from"./defect.summaryApi-CUJMEH2X.js";import{o as D,s as o,n as W,a as S}from"./types-CVZIcfwR.js";import{S as q}from"./SearchOutline-DTpRGgD3.js";import{R as G}from"./RefreshRound-CTJ0TzGv.js";import{C as F}from"./ChartPerson20Filled-DPfkBgkM.js";import{F as J}from"./FolderDetailsReference-CMf1FAHf.js";import{S as K}from"./SmartHome-Cil4HnwJ.js";import"./EyeOutline-bR4KJ9Je.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Q={class:"flex"},X=w({__name:"LeaderAssignmentForm",setup(n){return(s,m)=>(_(),f("div",null,[e("div",Q,[t(N)])]))}}),x="/api",Y={getAssignments:()=>b.get(`${x}/leaders`).then(n=>n.data),createAssign:n=>b.post(`${x}/leaders/assign`,n).then(s=>s.data),createUnassign:n=>b.post(`${x}/leaders/unassign`,n).then(s=>s.data)},R=D({assignAt:o(),unassignAt:o().nullable(),lineId:W().nullable(),lineName:o().nullable(),createdBy:o(),updatedBy:o().nullable(),lastUpdated:o()}),Z=D({leader:o(),activeLines:o(),lastUpdated:o().nullable(),activeDetail:S(R),inactiveDetail:S(R)}),ee=O(S(Z)),te=M("leaderStore",{state:()=>({loading:!1,error:null,AssignmentSummaryByLeader:[]}),actions:{async fetchSummaryByLeader(){this.loading=!0,this.error=null;try{const n=await Y.getAssignments(),s=ee.parse(n);return this.AssignmentSummaryByLeader=s.data,$.parse({success:!0,message:s.message??"loaded"})}catch(n){const s=n?.response?.data?.message||"Something went wrong";return this.error=s,$.parse({success:!1,message:s})}finally{this.loading=!1}}}});function V(){const n=P(),s=te(),{loading:m,AssignmentSummaryByLeader:h}=j(s);return{isLoading:m,AssignmentSummaryByLeader:h,fetchSummaryByLeader:async(p={notify:!0})=>{const{success:i,message:a}=await s.fetchSummaryByLeader();return p.notify&&(i?n.success(a):n.error(a)),{success:i,message:a}}}}const se={class:"flex flex-col gap-5"},ne={class:"flex justify-between"},ae={class:"!w-[300px]"},re={class:"flex gap-3 items-center"},oe=w({__name:"SummaryLeaderTable",setup(n){const s=T(""),m=E(()=>{const a=s.value.toLowerCase().trim();return a?(l.value||[]).filter(r=>r.leader?.toLowerCase().includes(a)||r.activeLines?.toLowerCase().includes(a)):l.value||[]}),{isLoading:h,AssignmentSummaryByLeader:l,fetchSummaryByLeader:p}=V(),i=async()=>{await p()};return(a,r)=>{const v=I,c=g("n-skeleton"),U=g("n-table");return _(),f("div",se,[e("div",ne,[e("div",ae,[t(z,{icon:u(q),placeholder:"Search",modelValue:s.value,"onUpdate:modelValue":r[0]||(r[0]=d=>s.value=d)},null,8,["icon","modelValue"])]),e("div",re,[t(v,{label:"Refresh",icon:u(G),onClick:i},null,8,["icon"]),t(v,{label:"Create Leader Assignment",icon:u(F),onClick:i,type:"primary"},null,8,["icon"])])]),t(U,null,{default:L(()=>[r[2]||(r[2]=e("thead",null,[e("tr",null,[e("th",null,"No"),e("th",null,"Leader"),e("th",null,"Line Assignments"),e("th",null,"Last Updated"),e("th",null,"Status")])],-1)),e("tbody",null,[u(h)?(_(),f(B,{key:0},k(10,d=>e("tr",{key:d},[e("td",null,[t(c,{text:""})]),e("td",null,[t(c,{text:""})]),e("td",null,[t(c,{text:""})]),e("td",null,[t(c,{text:""})]),e("td",null,[t(c,{text:""})]),e("td",null,[t(c,{text:""})]),e("td",null,[t(c,{text:""})]),e("td",null,[t(c,{text:""})])])),64)):(_(!0),f(B,{key:1},k(m.value,(d,A)=>(_(),f("tr",{key:A},[e("td",null,y(A+1),1),e("td",null,y(d.leader),1),e("td",null,y(d.activeLines),1),e("td",null,y(d.lastUpdated),1),e("td",null,[t(v,{label:"Detail",icon:u(J),onClick:r[1]||(r[1]=()=>{}),tertiary:""},null,8,["icon"])])]))),128))])]),_:1})])}}}),le={class:"flex flex-col gap-10"},ie={class:"flex justify-between items-center"},ce={class:"w-84 flex-auto"},de={class:"text-xl font-bold mb-1"},ue={class:"w-16 flex-auto text-right"},Be=w({__name:"LeadersPageView",setup(n){const s=T({title:"Leader Management Module",description:"A centralized interface enabling users to view, create, and maintain leader records assigned across multiple production lines. The module streamlines oversight, improves data governance, and ensures operational visibility by providing a structured workflow for leader placement and line assignments."}),{fetchSummaryByLeader:m}=V();return H(async()=>{await m()}),(h,l)=>{const p=g("n-icon"),i=g("n-breadcrumb-item"),a=g("n-breadcrumb");return _(),f("div",le,[e("div",ie,[e("div",ce,[e("h2",de,y(s.value.title),1),e("p",null,y(s.value.description),1)]),e("div",ue,[t(a,null,{default:L(()=>[t(i,null,{default:L(()=>[t(p,{component:u(K)},null,8,["component"]),l[0]||(l[0]=C(" Home",-1))]),_:1}),t(i,null,{default:L(()=>[t(p,{component:u(F)},null,8,["component"]),l[1]||(l[1]=C(" Leaders ",-1))]),_:1})]),_:1})])]),t(oe),t(X)])}}});export{Be as default};
