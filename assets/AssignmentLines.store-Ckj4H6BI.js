import{d as A,c as d,a as y,x as u,t as m,l as c,w as _,g,ad as x,o,F as S,H as L,ae as I,f as N,m as b,N as k,D as v,E as p}from"./index-BL_L1Flw.js";import{o as f,s as a,n,a as h,c as B}from"./types-D48y91Ee.js";import{A as l}from"./api.schema-363JpEzr.js";import"./user.schema-C6n3NMLA.js";const C={class:"flex justify-between items-center"},D={class:"w-84 flex-auto"},T={class:"text-xl font-bold mb-1"},P={key:0},E={class:"w-16 flex-auto text-right"},R=A({__name:"BasePageHeader",props:{title:{},description:{},breadcrumbs:{}},setup(s){return(e,t)=>{const i=N("router-link");return o(),d("div",C,[y("div",D,[y("h2",T,m(e.title),1),e.description?(o(),d("p",P,m(e.description),1)):u("",!0)]),y("div",E,[e.breadcrumbs?.length?(o(),c(g(x),{key:0},{default:_(()=>[(o(!0),d(S,null,L(e.breadcrumbs,(r,w)=>(o(),c(g(I),{key:w},{default:_(()=>[r.to?(o(),c(i,{key:0,to:r.to,class:"flex items-center hover:underline"},{default:_(()=>[r.icon?(o(),c(g(k),{key:0,component:r.icon,class:"mr-1"},null,8,["component"])):u("",!0),b(" "+m(r.label),1)]),_:2},1032,["to"])):(o(),d(S,{key:1},[r.icon?(o(),c(g(k),{key:0,component:r.icon,class:"mr-1"},null,8,["component"])):u("",!0),b(" "+m(r.label),1)],64))]),_:2},1024))),128))]),_:1})):u("",!0)])])}}}),V=f({id:n(),assignmentLineId:n(),color:a(),type:a(),orderQty:n(),cutQty:n(),createdAt:a().datetime({offset:!0}),updatedAt:a().datetime({offset:!0})});f({id:n(),userId:n(),lineId:n(),glId:n(),isActive:n(),dateStart:a().date(),dateEnd:a().date(),startedAt:a().nullable(),completedAt:a().nullable(),layingPlanning:h(V),line:a(),glnumber:a()});const W=f({id:n(),name:a(),location:a(),glNumber:h(a()),colors:h(a())});f({status:B(),message:a(),data:h(W)});const $=v("assignmentLines",{state:()=>({data:[],searchResult:[],isSearching:!1,meta:{},links:{},loading:!1,error:null,currentPage:1,lastPage:1,search:""}),actions:{async fetch(){this.loading=!0,this.error=null;try{const e=(await p.get("/api/assignment/lines")).data;return this.data=e.data,l.parse({success:!0,message:e.message??"Assignment Lines loaded"})}catch(s){const e=s?.response?.data?.message||"Something went wrong";return this.error=e,l.parse({success:!1,message:e})}finally{this.loading=!1}},async create(s){this.loading=!0,this.error=null;try{const e=await p.post("/api/assignment/line",s);return this.error=null,l.parse({success:!0,message:e.data.message??"Data Created Succesfully"})}catch(e){const t=e?.response?.data?.message||"Someting Wrong";return this.error=t,l.parse({success:!1,message:t})}finally{this.loading=!1}},async update(s,e){this.loading=!0,this.error=null;try{const t=await p.post(`/api/users/${s}`,e),i=this.data.findIndex(r=>r.id===s);return i!==-1&&(this.data[i]={...this.data[i],...t.data.data}),this.error=null,l.parse({success:!0,message:t.data.message??"Data Update Successfully"})}catch(t){const i=t?.response?.data?.message||"Something Wrong";return this.error=i,l.parse({success:!1,message:i})}finally{this.loading=!1}},async delete(s){this.loading=!0,this.error=null;try{const e=await p.delete(`/api/users/${s}`);return this.data=this.data.filter(t=>t.id!==s),this.error=null,l.parse({success:!0,message:e.data.message??"Data Delete Successfully"})}catch(e){const t=e?.response?.data?.message||"Something Wrong";return this.error=t,l.parse({success:!1,message:t})}finally{this.loading=!1}}},getters:{searchedItems:s=>{if(!s.search)return s.data;const e=s.search.toLowerCase();return s.data.filter(t=>t.name?.toLowerCase().includes(e))}}});export{R as _,$ as u};
