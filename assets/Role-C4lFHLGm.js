import{D as i,E as r}from"./index-BGjygZi6.js";function o(a){let e="An unknown error occurred";return typeof a=="string"?e=a:a instanceof Error?e=a.message:l(a)&&(e=a.response?.data?.message||a.message||e),e}function l(a){return a!==null&&typeof a=="object"&&("response"in a||"message"in a)}const h=i("role",{state:()=>({data:[],loading:!1,error:null,isModal:!1}),actions:{async fetchRole(){this.loading=!0,this.error=null;try{const a=await r.get("/api/roles");this.data=a.data.data,this.error=null}catch(a){throw this.data=[],this.error=o(a),a}finally{this.loading=!1}},async createRole(a){this.loading=!0,this.error=null;try{const e=await r.post("/api/roles",a);return this.data.push(e.data.data),this.data=this.data.sort((s,t)=>s.name.localeCompare(t.name)),this.error=null,e.data.message}catch(e){const s=e?.response?.data?.message||"Terjadi kesalahan";throw this.error=s,s}finally{this.loading=!1}},async updateRole(a,e){this.loading=!0,this.error=null;try{const s=await r.post(`/api/roles/${a}`,e);return this.fetchRole(),this.error=null,s.data.message}catch(s){const t=s?.response?.data?.message||"Terjadi kesalahan";throw this.error=t,t}finally{this.loading=!1}},async deleteRole(a){this.loading=!0,this.error=null;try{const e=await r.delete(`/api/roles/${a}`);return this.data=this.data.filter(s=>s.id!==a),this.error=null,e.data.message}catch(e){const s=e?.response?.data?.message||"Terjadi kesalahan";throw this.error=s,s}finally{this.loading=!1}}}});export{o as h,h as u};
