import{d as B,k,r as T,q as L,y as M,c as R,a as s,v as P,x as $,e as a,g as o,n as V,L as A,f as _,w as d,o as x,m as C,t as E,l as H,M as I,P as j,p as q,I as W,h as z}from"./index-KKLjXh5o.js";import{I as N}from"./InputLabelWithError-BDBcFb6B.js";import{u as F,_ as G}from"./user.form-DDJO5RST.js";import{u as J}from"./Role-De2Fs16-.js";import{S as K}from"./SaveAnnotation-o7iAhaiJ.js";import{S as O}from"./SmartHome-CoCWvi5q.js";import{U as Q}from"./UserMultiple-DS4NHi5E.js";import{F as X}from"./FormNew28Regular-CpkJIHAB.js";const Y={class:"flex gap-2"},Z={class:"w-100"},ee=B({__name:"UserWithRoleForm",props:{initialData:{},isEdit:{type:Boolean,default:!1},submitLabel:{default:"Create Employee"},submitType:{default:"default"},placmentEnd:{type:Boolean,default:!1},visible:{type:Boolean,default:!0},icon:{default:K}},emits:["click:submitted"],setup(U,{expose:h,emit:i}){const y=i,u=J(),g=k(()=>u.data.map(e=>({value:e.name,label:e.name}))),w=T(!1),n=U,{name:l,email:p,errors:f,roleNames:b,validateForm:S,onSubmit:c}=F(n.initialData),r=c(e=>{y("click:submitted",e)});return L(()=>n.initialData,e=>{e?l.value=e.name:n.isEdit?l.value="":w.value=!0},{deep:!0}),h({name:l,validateForm:S,submit:r}),M(()=>{u.fetchRole()}),(e,t)=>{const v=_("n-icon"),D=_("n-button");return x(),R("div",null,[s("form",{onSubmit:t[3]||(t[3]=P((...m)=>o(r)&&o(r)(...m),["prevent"]))},[s("div",Y,[s("div",null,[a(N,{name:"name",errors:o(f),label:"Name",modelValue:o(l),"onUpdate:modelValue":t[0]||(t[0]=m=>V(l)?l.value=m:null)},null,8,["errors","modelValue"])]),s("div",null,[a(N,{name:"email",errors:o(f),label:"Email",modelValue:o(p),"onUpdate:modelValue":t[1]||(t[1]=m=>V(p)?p.value=m:null)},null,8,["errors","modelValue"])]),s("div",Z,[a(G,{modelValue:o(b),"onUpdate:modelValue":t[2]||(t[2]=m=>V(b)?b.value=m:null),name:"roleNames",options:g.value,multiple:!0,errors:o(f),label:"Roles Name"},null,8,["modelValue","options","errors"])])]),n.visible?(x(),R("div",{key:0,class:A([n.placmentEnd?"justify-end":"","flex gap-2 mt-10"])},[s("div",null,[a(D,{type:n.submitType,"icon-placement":"right","attr-type":"submit",block:""},{icon:d(()=>[a(v,null,{default:d(()=>[(x(),H(I(n.icon)))]),_:1})]),default:d(()=>[C(" "+E(n.submitLabel),1)]),_:1},8,["type"])])],2)):$("",!0)],32)])}}}),te={class:"flex flex-col gap-10"},ae={class:"bg-gray-50 p-5 rounded-md"},se={class:"flex justify-between items-center"},oe={class:"w-84 flex-auto"},ne={class:"text-xl font-bold mb-1"},ie={class:"w-16 flex-auto text-right"},be=B({__name:"UserFormView",props:{afterSubmit:{default:"redirect"},initialData:{}},emits:["submitted"],setup(U,{emit:h}){const i=U,y=j(),u=q(),g=z(),{handleCreateStore:w,handleUpdateStore:n}=F(),l=h,p=async r=>{if(i.initialData?.id){f(r);return}y.success({title:"Confirmation Create User",content:"Are you sure you want to create this record? Please review the details before proceeding.",positiveText:"Confirm",negativeText:"Cancel",draggable:!0,onPositiveClick:async()=>{const{success:e,message:t}=await w(r);e?(u.success(t),i.afterSubmit==="emit"?l("submitted"):g.push({name:"users"})):u.error(t)}})},f=async r=>{y.success({title:"Confirmation Update User",content:"Are you sure you want to create this record? Please review the details before proceeding.",positiveText:"Confirm",negativeText:"Cancel",draggable:!0,onPositiveClick:async()=>{const{success:e,message:t}=await n(i.initialData?.id??1,r,{notify:!1});e?(u.success(t),i.afterSubmit==="emit"?l("submitted"):g.push({name:"users"})):u.error(t)}})},b=k(()=>i.initialData?.id?"edit":"create"),S={create:{title:"Create User",description:"Create a new user account with required credentials."},edit:{title:"Edit User",description:"Modify existing user information and account settings."}},c=k(()=>S[b.value]);return W({title:c.value.title,meta:[{name:"description",content:c.value.description}]}),(r,e)=>{const t=_("n-icon"),v=_("n-breadcrumb-item"),D=_("n-breadcrumb");return x(),R("div",te,[s("div",ae,[s("div",se,[s("div",oe,[s("h2",ne,E(c.value.title),1),s("p",null,E(c.value.description),1)]),s("div",ie,[a(D,null,{default:d(()=>[a(v,null,{default:d(()=>[a(t,{component:o(O)},null,8,["component"]),e[0]||(e[0]=C(" Home",-1))]),_:1}),a(v,null,{default:d(()=>[a(t,{component:o(Q)},null,8,["component"]),e[1]||(e[1]=C(" Users",-1))]),_:1}),a(v,null,{default:d(()=>[a(t,{component:o(X)},null,8,["component"]),e[2]||(e[2]=C(" Form",-1))]),_:1})]),_:1})])])]),s("div",null,[a(ee,{"onClick:submitted":p,submitLabel:i.initialData?.id?"Update User":"Create User",initialData:i.initialData},null,8,["submitLabel","initialData"])])])}}});export{be as _};
