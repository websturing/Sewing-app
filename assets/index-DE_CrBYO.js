import{d as oe,Z as H,a5 as se,k as L,W as I,q as N,Y as K,y as Z,$ as re,i as B,a6 as ae,J as le,a7 as R,a8 as ue,a9 as ce,a1 as P,aa as fe,ab as de}from"./index-KKLjXh5o.js";const pe=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function he(e){function t(i){return function(...r){if(!e.value)throw new Error("ECharts is not initialized yet.");return Reflect.apply(e.value[i],e.value,r)}}return pe.reduce((i,o)=>(i[o]=t(o),i),{})}function ge(e,t,i){N([i,e,t],([o,r,n],v,m)=>{let p=null;if(o&&r&&n){const{offsetWidth:l,offsetHeight:c}=o,{throttle:a=100,onResize:h}=n===!0?{}:n;let O=!1;const u=()=>{r.resize(),h?.()},g=a?de(u,a):u;p=new ResizeObserver(()=>{!O&&(O=!0,o.offsetWidth===l&&o.offsetHeight===c)||o.offsetWidth===0||o.offsetHeight===0||g()}),p.observe(o)}m(()=>{p&&(p.disconnect(),p=null)})})}const me={autoresize:[Boolean,Object]},ve=Symbol();function Oe(e,t,i){const o=P(ve,{}),r=L(()=>({...I(o),...i?.value}));K(()=>{const n=e.value;n&&(t.value?n.showLoading(r.value):n.hideLoading())})}const Se={loading:Boolean,loadingOptions:Object};function q(){return typeof window<"u"&&typeof document<"u"}const ye=/^on[^a-z]/,J=e=>ye.test(e);function be(e){const t={};for(const i in e)J(i)||(t[i]=e[i]);return t}function Ae(e){const t=Number(e);return Number.isInteger(t)&&t>=0&&t<Math.pow(2,32)-1&&String(t)===e}function we(e,t){const i=new Set(e),o=new Set(t);if(i.size!==o.size)return!1;for(const r of i)if(!o.has(r))return!1;return!0}function X(e){return e!=null&&typeof e=="object"&&!Array.isArray(e)}const Q={tooltip:["tooltip","formatter"],dataView:["toolbox","feature","dataView","optionToContent"]},Ee=Object.keys(Q);function D(e){return Ee.some(t=>e===t||e.startsWith(t+"-"))}function _e(e,t){const i=q()?document.createElement("div"):void 0,o=R({}),r=R({}),n=R({}),v=H(!1),m=()=>v.value&&i?B(fe,{to:i},Object.entries(e).filter(([a])=>D(a)).map(([a,h])=>{const O=a;return B("div",{ref:u=>{u instanceof HTMLElement&&(o[O]=u)},style:{display:"contents"}},r[O]?h?.(n[O]):void 0)})):void 0;function p(a){return a!==null&&typeof a=="object"&&!Array.isArray(a)}function l(a){const h={...a},O=(u,g)=>{const y=u[g];if(Array.isArray(y))return u[g]=[...y],u[g];if(p(y))return u[g]={...y},u[g];if(y===void 0)return u[g]=Ae(g)?[]:{},u[g]};return Object.keys(e).filter(u=>D(u)).forEach(u=>{const[g,...y]=u.split("-"),M=Q[g];if(!M)return;const b=[...y,...M];if(b.length===0)return;let _=h;for(let w=0;w<b.length-1;w++)if(_=O(_,b[w]),!_)return;_[b[b.length-1]]=w=>(r[u]=!0,n[u]=w,o[u])}),h}let c=[];return ue(()=>{const a=Object.keys(e).filter(D);we(a,c)||(c.forEach(h=>{a.includes(h)||(delete n[h],delete r[h],delete o[h])}),c=a,t())}),Z(()=>{v.value=!0}),ce(()=>{i?.remove()}),{teleportedSlots:m,patchOption:l}}let A=null;const W="x-vue-echarts";function je(){if(A!=null)return A;const e=globalThis.customElements;if(!q()||!e?.get)return A=!1,A;if(!e.get(W))try{class t extends HTMLElement{__dispose=null;disconnectedCallback(){this.__dispose&&(this.__dispose(),this.__dispose=null)}}e.define(W,t)}catch{return A=!1,A}return A=!0,A}function Me(e){if(!X(e))return;const t=e.id;if(typeof t=="string")return t;if(typeof t=="number"&&Number.isFinite(t))return String(t)}function k(e){const t=e,i=Array.isArray(t.options)?t.options.length:0,o=Array.isArray(t.media)?t.media.length:0,r=Object.create(null),n=[],v=[];for(const m of Object.keys(t)){if(m==="options"||m==="media")continue;const p=t[m];if(Array.isArray(p)){const l=p,c=new Set;let a=0;for(let h=0;h<l.length;h++){const O=Me(l[h]);O!==void 0?c.add(O):a++}r[m]={idsSorted:c.size>0?Array.from(c).sort():[],noIdCount:a}}else X(p)?n.push(m):p!==void 0&&v.push(m)}return n.length>1&&n.sort(),v.length>1&&v.sort(),{optionsLength:i,mediaLength:o,arrays:r,objects:n,scalars:v}}function F(e,t){if(e.length===0)return[];if(t.length===0)return e.slice();const i=new Set(t),o=[];for(let r=0;r<e.length;r++){const n=e[r];i.has(n)||o.push(n)}return o}function Te(e,t){if(e.length===0)return!1;if(t.length===0)return!0;const i=new Set(t);for(let o=0;o<e.length;o++)if(!i.has(e[o]))return!0;return!1}function ze(e,t){const i=k(t);if(!e)return{option:t,signature:i,plan:{notMerge:!1}};if(i.optionsLength<e.optionsLength)return{option:t,signature:i,plan:{notMerge:!0}};if(i.mediaLength<e.mediaLength)return{option:t,signature:i,plan:{notMerge:!0}};if(F(e.scalars,i.scalars).length>0)return{option:t,signature:i,plan:{notMerge:!0}};const o=new Set,r=new Map,n=F(e.objects,i.objects);for(let l=0;l<n.length;l++)r.set(n[l],null);for(const l of Object.keys(e.arrays)){const c=e.arrays[l];if(!c)continue;const a=i.arrays[l];if(!a){(c.idsSorted.length>0||c.noIdCount>0)&&(r.set(l,[]),o.add(l));continue}if(Te(c.idsSorted,a.idsSorted)){o.add(l);continue}a.noIdCount<c.noIdCount&&o.add(l)}let v=t,m=i;if(r.size>0){const l={...t};r.forEach((c,a)=>{l[a]=c}),v=l,m=k(v)}const p=o.size>0?Array.from(o).sort():void 0;return{option:v,signature:m,plan:p?{notMerge:!1,replaceMerge:p}:{notMerge:!1}}}var G=`x-vue-echarts{display:block;width:100%;height:100%;min-width:0;}
x-vue-echarts>:first-child,x-vue-echarts>:first-child>canvas{border-radius:inherit;}
`;if(typeof document<"u")if(Array.isArray(document.adoptedStyleSheets)&&"replaceSync"in CSSStyleSheet.prototype){const e=new CSSStyleSheet;e.replaceSync(G),document.adoptedStyleSheets=[...document.adoptedStyleSheets,e]}else{const e=document.createElement("style");e.textContent=G,document.head.appendChild(e)}const Le=je(),Ce=Symbol(),xe=Symbol(),Ie=Symbol();var Ne=oe({name:"Echarts",inheritAttrs:!1,props:{option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean,...me,...Se},emits:{},slots:Object,setup(e,{attrs:t,expose:i,slots:o}){const r=H(),n=H(),v=P(Ce,null),m=P(xe,null),p=P(Ie,null),{autoresize:l,manualUpdate:c,loading:a,loadingOptions:h}=se(e),O=L(()=>e.theme||I(v)),u=L(()=>e.initOptions||I(m)||void 0),g=L(()=>e.updateOptions||I(p)),y=L(()=>be(t)),M={},b=new Map,{teleportedSlots:_,patchOption:w}=_e(o,()=>{!c.value&&e.option&&n.value&&T(n.value,e.option)});let j;function $(s){const f={},S=(s?.replaceMerge??[]).filter(d=>d!=null);return S.length>0&&(f.replaceMerge=[...new Set(S)]),s?.notMerge!==void 0&&(f.notMerge=s.notMerge),f}function T(s,f,S,d=!1){const E=w(f);if(d){s.setOption(E,S??{}),j=void 0;return}if(g.value){const x=S??g.value;s.setOption(E,x),j=void 0;return}const z=ze(j,E),C=$(z.plan);s.setOption(z.option,C),j=z.signature}Object.keys(t).filter(s=>J(s)).forEach(s=>{if(s.indexOf("Native:")===2){const E=`on${s.charAt(9).toUpperCase()}${s.slice(10)}`;M[E]=t[s];return}let f=s.charAt(2).toLowerCase()+s.slice(3),S;f.indexOf("zr:")===0&&(S=!0,f=f.substring(3));let d;f.substring(f.length-4)==="Once"&&(d=!0,f=f.substring(0,f.length-4)),b.set({event:f,zr:S,once:d},t[s])});function V(){if(!r.value)return;const s=n.value=ae(r.value,O.value,u.value);e.group&&(s.group=e.group),b.forEach((d,{zr:E,once:z,event:C})=>{if(!d)return;const x=E?s.getZr():s;if(z){const ne=d;let Y=!1;d=(...ie)=>{Y||(Y=!0,ne(...ie),x.off(C,d))}}x.on(C,d)});function f(){s&&!s.isDisposed()&&s.resize()}function S(){const{option:d}=e;if(c.value){d&&T(s,d,void 0,!0);return}d&&T(s,d)}l.value?le(()=>{f(),S()}):S()}const ee=(s,f,S)=>{if(!e.manualUpdate)return;const d=typeof f=="boolean"?{notMerge:f,lazyUpdate:S}:f;n.value&&T(n.value,s,d??void 0,!0)};function U(){n.value&&(n.value.dispose(),n.value=void 0),j=void 0}N(()=>e.option,s=>{if(!s){j=void 0;return}c.value||n.value&&T(n.value,s)},{deep:!0}),N([c,u],()=>{U(),V()},{deep:!0}),N(O,s=>{n.value?.setTheme(s||{})},{deep:!0}),K(()=>{e.group&&n.value&&(n.value.group=e.group)});const te=he(n);return Oe(n,a,h),ge(n,l,r),Z(()=>{V()}),re(()=>{Le&&r.value?r.value.__dispose=U:U()}),i({setOption:ee,root:r,chart:n,...te}),(()=>B(W,{...y.value,...M,ref:r,class:["echarts",y.value.class]},_()))}}),Ue=Ne;export{Ue as s};
