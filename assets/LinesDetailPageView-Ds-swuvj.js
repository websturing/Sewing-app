import{_ as G}from"./BaseButton.vue_vue_type_script_setup_true_lang-WC2rZVzv.js";import{_ as Z}from"./BaseInput.vue_vue_type_script_setup_true_lang-BU0nAdgp.js";import{d as S}from"./dayjs.min-lasCq60O.js";import{S as ee}from"./SearchOutline-SINafxgf.js";import{R as te}from"./RefreshRound-BRsK8zsJ.js";import{d as N,r as w,k as V,q as F,c as p,o as l,a as e,e as n,t as u,g as d,f as _,L as z,w as i,F as L,H as $,E as ne,D as se,p as oe,s as le,m as C,l as k,h as ae,j as ie,y as re}from"./index-BGjygZi6.js";import{q as de}from"./index-B-cYlh1f.js";import{o as j,s as x,n as O,a as ce,c as ue}from"./types-CVZIcfwR.js";import{A as P}from"./api.schema-B7NsqcGR.js";import{G as pe,I as me,a as _e,A as ge,L as fe,O as he,S as ye,H as ve,D as be}from"./IosTrendingUp-Cgq5r3h9.js";import{C as q}from"./ChartPerson20Filled-DzVyi-rB.js";import{u as xe}from"./line.page-BjrcM1Ro.js";import{B as U}from"./BrandAirtable-b1PTfDsq.js";import{S as Le}from"./SmartHome-D-YBCpvA.js";import"./_commonjsHelpers-CE1G-McA.js";import"./stockin.api.schema-DC3-uBMr.js";import"./metaPagination-9MSE0uSw.js";const $e={class:"flex flex-col gap-3"},we={class:"flex justify-between items-center"},Ce={class:"font-semibold"},Ne={class:"flex gap-2 justify-end"},De={key:1},ke=N({__name:"AttendancesGroupLineTable",props:{groupLine:{},isLoading:{type:Boolean,default:!0},highlightTrigger:{type:[Number,Boolean]}},emits:["click:refresh"],setup(g,{emit:c}){const o=S(new Date).format("MMMM DD, YYYY"),s=w(""),t=g,f=c,v=V(()=>s.value?t.groupLine.filter(y=>y.userName.toLowerCase().includes(s.value.toLowerCase())||y.employeeCode.toLowerCase().includes(s.value.toLowerCase())):t.groupLine),h=w(!1);return F(()=>t.highlightTrigger,()=>{h.value=!0,setTimeout(()=>{h.value=!1},800)},{immediate:!1}),(y,m)=>{const b=_("n-table");return l(),p("div",$e,[e("div",we,[e("p",Ce,"Attendance List | "+u(d(o)),1),e("div",Ne,[n(Z,{icon:d(ee),placeholder:"Search",modelValue:s.value,"onUpdate:modelValue":m[0]||(m[0]=a=>s.value=a)},null,8,["icon","modelValue"]),n(G,{label:"Refresh",icon:d(te),onClick:m[1]||(m[1]=a=>f("click:refresh"))},null,8,["icon"])])]),n(b,{class:z({"bg-yellow-200 ring-2 ring-yellow-400":h.value,"bg-white":!h.value})},{default:i(()=>[m[3]||(m[3]=e("thead",null,[e("tr",null,[e("th",null,"Employee ID"),e("th",null,"Employee Name"),e("th",null,"Date"),e("th",null,"Status"),e("th",null,"Check-in Time"),e("th",null,"Check-out Time")])],-1)),e("tbody",null,[y.isLoading?(l(),p("tr",De,[...m[2]||(m[2]=[e("td",{colspan:"6",class:"!text-center py-5"}," Loading... ",-1)])])):(l(!0),p(L,{key:0},$(v.value,a=>(l(),p("tr",{key:a.id},[e("td",null,u(a.employeeCode),1),e("td",null,u(a.userName),1),e("td",null,u(a.attendanceDate),1),e("td",null,u(a.status),1),e("td",null,u(a.checkInTime||"N/A"),1),e("td",null,u(a.checkOutTime||"N/A"),1)]))),128))])]),_:1},8,["class"])])}}}),Ae="/api",Ge={getAttendanceByLine:(g,c)=>ne.get(`${Ae}/attendance/group/line/${g}`,{params:c,paramsSerializer:o=>de.stringify(o,{arrayFormat:"brackets"})}).then(o=>o.data)},Te=j({id:O().optional(),attendanceDate:x(),employeeCode:x(),lineId:O(),lineName:x(),checkInTime:x().nullable(),checkOutTime:x().nullable(),status:x(),userName:x(),deviceName:x().nullable()}),He=j({status:ue(),message:x(),data:ce(Te)}),Se=se("attendance",{state:()=>({groupLine:[],isLoading:!1,error:null}),actions:{async fetchGroupLine(g){this.isLoading=!0,this.error=null;try{const c=await Ge.getAttendanceByLine(g,{}),o=He.parse(c);return this.groupLine=o.data,P.parse({success:!0,message:o.message??"Attendances By Group Line loaded",data:{attendanceGroupLine:o.data}})}catch(c){const o=c?.response?.data?.message||"Something went wrong";return this.error=o,P.parse({success:!1,message:o})}finally{this.isLoading=!1}}}});function Fe(){const g=oe(),c=Se(),{groupLine:o,isLoading:s}=le(c);return{groupLine:o,isLoading:s,handleFetch:async(f={notify:!0},v)=>{const{success:h,message:y}=await c.fetchGroupLine(v);f.notify&&(h?g.success(y):g.error(y))}}}const ze={class:"flex items-center gap-2"},Me={class:"text-3xl font-bold mt-2"},Ee={class:"flex items-center gap-5"},Be={class:"bg-green-50 rounded px-3"},Ie=N({__name:"EmployeeAttendanceCard",props:{EmployeeAttendCount:{default:0}},setup(g){const c=g;return(o,s)=>{const t=_("n-icon"),f=_("n-card");return l(),p("div",null,[n(f,null,{default:i(()=>[e("div",ze,[n(t,{component:d(pe),size:"24"},null,8,["component"]),s[0]||(s[0]=e("p",null,"Employee Attend",-1))]),e("p",Me,u(c.EmployeeAttendCount),1),e("div",Ee,[s[2]||(s[2]=e("p",null,"Last Week",-1)),e("p",Be,[n(t,{size:"16",component:d(me),class:"text-green-500"},null,8,["component"]),s[1]||(s[1]=C(" 2,5% ",-1))])])]),_:1})])}}}),Re={class:"flex items-center gap-2"},Ye=N({__name:"EmployeeLeaderCard",props:{highlightTrigger:{type:[Number,Boolean]}},setup(g){const c=g,o=w(!1);return F(()=>c.highlightTrigger,()=>{o.value=!0,setTimeout(()=>{o.value=!1},800)},{immediate:!1}),(s,t)=>{const f=_("n-icon"),v=_("n-card");return l(),p("div",null,[n(v,{class:z({"bg-yellow-200 ring-2 ring-yellow-400":o.value,"bg-white":!o.value})},{default:i(()=>[e("div",Re,[n(f,{component:d(q),size:"24"},null,8,["component"]),t[0]||(t[0]=e("p",null,"Leader",-1))]),t[1]||(t[1]=e("p",{class:"text-3xl font-bold mt-2"}," Administrator ",-1))]),_:1},8,["class"])])}}}),Oe={class:"flex flex-col gap-5 border border-gray-200 px-2 py-4 rounded-lg shadow-sm"},Pe={class:"!w-full"},Ue={class:"flex items-center gap-4"},Ve={class:"bg-blue-50 pl-3 pr-3 pt-3 pb-2 rounded-xl"},je={class:"flex flex-col"},qe={class:"text-lg font-semibold"},We={class:"text-gray-400"},Je={class:"bg-gray-50 p-5 rounded-lg"},Ke=N({__name:"LineDeviceCard",props:{lineDevices:{default:()=>[]}},setup(g){const c=g;return(o,s)=>{const t=_("n-icon"),f=_("n-collapse-item"),v=_("n-collapse");return l(),p("div",Oe,[n(v,{"arrow-placement":"right"},{default:i(()=>[(l(!0),p(L,null,$(c.lineDevices,(h,y)=>(l(),k(f,{key:y,name:y},{header:i(()=>[e("div",Pe,[e("div",Ue,[e("div",Ve,[n(t,{size:"24",class:"text-blue-700"},{default:i(()=>[n(d(_e))]),_:1})]),e("div",je,[e("p",qe,u(h.deviceName),1),e("p",We,u(h.deviceDescription),1)])])])]),default:i(()=>[e("div",Je,[e("table",null,[e("tr",null,[s[0]||(s[0]=e("td",null,"Mac Address",-1)),s[1]||(s[1]=e("td",null,"   :   ",-1)),e("td",null,u(h.deviceMacAddress),1)]),e("tr",null,[s[2]||(s[2]=e("td",null,"Last Updated",-1)),s[3]||(s[3]=e("td",null,"   :   ",-1)),e("td",null,u(h.updatedAt),1)])])])]),_:2},1032,["name"]))),128))]),_:1})])}}}),Qe={key:0},Xe={class:"flex justify-between items-center"},Ze={class:"font-semibold"},et={class:"flex gap-2 text-sm text-gray-500"},tt={class:"text-xs text-blue-400"},nt=["onClick"],st={key:1},ot=N({__name:"LineGLHistoryTimeline",props:{lineHistoryGLNumber:{default:()=>[]}},setup(g){const c=ae(),o=g,s=V(()=>o.lineHistoryGLNumber&&o.lineHistoryGLNumber.length>0),t=f=>{c.push({name:"gls-detail",params:{id:f}})};return(f,v)=>{const h=_("n-icon"),y=_("n-timeline-item"),m=_("n-timeline"),b=_("n-empty");return l(),p("div",null,[s.value?(l(),p("div",Qe,[n(m,null,{default:i(()=>[(l(!0),p(L,null,$(f.lineHistoryGLNumber,(a,H)=>(l(),k(y,{key:a.glNo,type:H==0?"success":"default"},{default:i(()=>[e("div",Xe,[e("div",null,[e("p",Ze,u(a.glNo),1),e("div",et,[e("p",null,"Color : "+u(a.totalColors),1),e("p",null,"Cut Pieces : "+u(a.totalPcs),1)]),e("p",tt,u(a.updatedAt),1)]),e("div",{class:"hover:text-blue-500 cursor-pointer",onClick:M=>t(a.glNo)},[n(h,{component:d(ge),size:18},null,8,["component"])],8,nt)])]),_:2},1032,["type"]))),128))]),_:1})])):(l(),p("div",st,[n(b,{description:"No History GL Number Found"})]))])}}}),lt={class:"text-blue-500 font-semibold"},at={class:"flex gap-2 flex-wrap"},it=["colspan"],rt={class:"!text-center"},dt={class:"font-semibold !text-center"},ct={class:"!text-red-400 !text-center font-semibold"},ut={class:"!bg-gray-50 !text-center"},pt=N({__name:"LineGlSummary",props:{data:{default:()=>[]}},setup(g){const c=g,o=w(null);return F(()=>c.data,s=>{s.length>0&&!o.value&&(o.value=s[0].glNo)},{immediate:!0}),(s,t)=>{const f=_("n-table"),v=_("n-tab-pane"),h=_("n-tabs"),y=_("n-empty");return c.data.length>0?(l(),k(h,{key:0,value:o.value,"onUpdate:value":t[0]||(t[0]=m=>o.value=m),type:"card",animated:""},{default:i(()=>[(l(!0),p(L,null,$(c.data,m=>(l(),k(v,{key:m.glNo,name:m.glNo,tab:`GL-${m.glNo.toString()}`},{tab:i(()=>[e("p",lt,"GL-"+u(m.glNo),1)]),default:i(()=>[e("div",at,[(l(!0),p(L,null,$(m.colors,b=>(l(),k(f,{class:"flex-1"},{default:i(()=>[e("thead",null,[e("tr",null,[t[1]||(t[1]=e("th",null,"Color",-1)),e("th",{colspan:b.sizes.length,class:"!text-center"},u(b.color),9,it)]),e("tr",null,[t[2]||(t[2]=e("th",null,"Size",-1)),(l(!0),p(L,null,$(b.sizes,a=>(l(),p("th",rt,u(a.size),1))),256))])]),e("tbody",null,[e("tr",null,[t[3]||(t[3]=e("td",null,"CUT PIECE IN",-1)),(l(!0),p(L,null,$(b.sizes,a=>(l(),p("td",dt,u(a.pcs),1))),256))]),e("tr",null,[t[4]||(t[4]=e("td",null,"DEFECT",-1)),(l(!0),p(L,null,$(b.sizes,a=>(l(),p("td",ct,u(a.defect),1))),256))]),e("tr",null,[t[5]||(t[5]=e("td",{class:"!bg-gray-50"},"DIFF",-1)),(l(!0),p(L,null,$(b.sizes,a=>(l(),p("td",ut,u(Number(a.pcs)-Number(a.defect)),1))),256))])])]),_:2},1024))),256))])]),_:2},1032,["name","tab"]))),128))]),_:1},8,["value"])):(l(),k(y,{key:1,size:"huge",description:"No GL Summary Data Available"}))}}}),mt={class:"flex flex-col gap-5"},_t={class:"flex flex-col gap-10"},gt={class:"flex items-center gap-4"},ft={class:"bg-blue-50 pl-3 pr-3 pt-3 pb-2 rounded-xl"},ht={class:"flex flex-col gap-2"},yt={class:"text-xl font-bold"},vt={class:"flex gap-4 items-center"},bt={class:"flex gap-2 items-center bg-gray-100 px-4 rounded-lg"},xt={class:"text-gray-700"},Lt={class:"flex gap-2 items-center bg-teal-100 px-4 rounded-lg"},$t={class:"w-16 flex-auto text-right"},wt={class:"flex gap-1"},Ct={class:"flex flex-col gap-5"},Nt={class:"flex-1"},Dt={class:"lg:w-80 xl:w-96 flex flex-col gap-2"},kt={class:"bg-gray-50 rounded-lg p-5"},At={class:"flex flex-col gap-2"},Gt={class:"bg-gray-50 p-5 rounded-lg"},Wt=N({__name:"LinesDetailPageView",setup(g){const c=ie(),o=w(!1),s=w(!1),t=c.params.id,f=w(0),v=w(0),{line:h,lineDevices:y,lineStockInSummary:m,lineHistoryGLNumber:b,handleFetchById:a,handleFetchLineDevices:H,handleHistoryGlNumber:M}=xe(),{groupLine:E,isLoading:W,handleFetch:B}=Fe(),J=()=>{console.log(t),t&&B({notify:!0},t)},K=T=>{t&&H(t,{notify:T})},Q=()=>{s.value=!0,t&&M(t,{notify:!0})};return re(()=>{if(t){const T=S().format("YYYY-MM-DD"),r=S().subtract(14,"day").format("YYYY-MM-DD");a({notify:!0},{id:t,startDate:r,endDate:T}),B({notify:!1},t),K(!1)}}),(T,r)=>{const A=_("n-icon"),I=_("n-breadcrumb-item"),X=_("n-breadcrumb"),R=_("n-card"),Y=_("n-modal");return l(),p("div",mt,[n(R,null,{default:i(()=>[e("div",_t,[e("div",gt,[e("div",ft,[n(A,{size:"48"},{default:i(()=>[n(d(U))]),_:1})]),e("div",ht,[e("p",yt," Line "+u(d(h)?.name),1),e("div",vt,[e("div",bt,[n(A,{size:"14",class:"text-gray-700"},{default:i(()=>[n(d(fe))]),_:1}),e("p",xt,u(d(h)?.location),1)]),e("div",Lt,[n(A,{size:"16",class:"text-green-800"},{default:i(()=>[n(d(he))]),_:1}),r[5]||(r[5]=e("p",{class:"text-teal-700"},"Online",-1))])])]),e("div",$t,[n(X,null,{default:i(()=>[n(I,null,{default:i(()=>[n(A,{component:d(Le)},null,8,["component"]),r[6]||(r[6]=C(" Home",-1))]),_:1}),n(I,null,{default:i(()=>[n(A,{component:d(U)},null,8,["component"]),r[7]||(r[7]=C(" Lines ",-1))]),_:1})]),_:1})])]),e("div",wt,[n(G,{icon:d(ye),onClick:r[0]||(r[0]=D=>f.value=Date.now())},{default:i(()=>[...r[8]||(r[8]=[C("Attendances ",-1)])]),_:1},8,["icon"]),n(G,{icon:d(q),onClick:r[1]||(r[1]=D=>v.value=Date.now())},{default:i(()=>[...r[9]||(r[9]=[C("Leaders ",-1)])]),_:1},8,["icon"]),n(G,{icon:d(ve),onClick:Q},{default:i(()=>[...r[10]||(r[10]=[C("History GL Numbers ",-1)])]),_:1},8,["icon"]),n(G,{icon:d(be),onClick:r[2]||(r[2]=D=>o.value=!0)},{default:i(()=>[...r[11]||(r[11]=[C("Devices",-1)])]),_:1},8,["icon"])])])]),_:1}),n(R,{class:"shadow-sm"},{default:i(()=>[e("div",Ct,[e("div",{class:z(["flex",d(m).length>0?"items-end":"items-center","gap-5"])},[e("div",Nt,[n(pt,{data:d(m)},null,8,["data"])]),e("div",Dt,[n(Ye,{"highlight-trigger":v.value},null,8,["highlight-trigger"]),n(Ie,{EmployeeAttendCount:d(E).length},null,8,["EmployeeAttendCount"])])],2),e("div",kt,[n(ke,{"highlight-trigger":f.value,groupLine:d(E),isLoading:d(W),"onClick:refresh":J},null,8,["highlight-trigger","groupLine","isLoading"])])])]),_:1}),n(Y,{show:o.value,"onUpdate:show":r[3]||(r[3]=D=>o.value=D),title:"Line Devices",closable:!0,preset:"card",style:{width:"600px"}},{default:i(()=>[n(Ke,{lineDevices:d(y)},null,8,["lineDevices"])]),_:1},8,["show"]),n(Y,{show:s.value,"onUpdate:show":r[4]||(r[4]=D=>s.value=D),title:"GL Transaction History",closable:!0,preset:"card",style:{width:"600px"}},{default:i(()=>[e("div",At,[e("div",Gt,[n(ot,{lineHistoryGLNumber:d(b)},null,8,["lineHistoryGLNumber"])])])]),_:1},8,["show"])])}}});export{Wt as default};
