import{_ as j}from"./BaseAdvanceFilter.vue_vue_type_script_setup_true_lang-C_0ONjSW.js";import{_ as Q}from"./BaseButton.vue_vue_type_script_setup_true_lang-DcrN91Jq.js";import{_ as q}from"./BaseDatable.vue_vue_type_script_setup_true_lang-C74EmZbV.js";import{_ as K}from"./BaseDataTableButton.vue_vue_type_script_setup_true_lang-DulAGZIh.js";import{u as O,a as M,b as Y,_ as J}from"./useEmployee-Cy6a3Qc6.js";import{f as W}from"./dateRangeFormaterNaive-ClR-GZjc.js";import{s as X,k as Z,r as m,q as N,i as T,N as ee,K as te,d as oe,y as ae,I as ne,c as le,a as n,e as a,t as E,g as t,w as g,f as x,n as V,h as se,o as re,m as ie}from"./index-KKLjXh5o.js";import{H as me,F as ce,M as de}from"./Male-DYVPEkja.js";import{C as pe}from"./Create-DJyHxwOC.js";import{S as ue}from"./SmartHome-CoCWvi5q.js";import{C as fe}from"./QrCode20Filled-ibK8ip_0.js";import"./BaseInput.vue_vue_type_script_setup_true_lang-C4zdXy1y.js";import"./SearchOutline-BLnz_9Lx.js";import"./DocumentExport-Cueps_nq.js";import"./RefreshRound-Cuk3RQia.js";import"./DocumentEdit16Filled-C6K12j4C.js";import"./InputLabelWithError-BDBcFb6B.js";import"./EyeOutline-DTRfcmK3.js";import"./AlertOutline-Cjudp7X9.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SaveAnnotation-o7iAhaiJ.js";import"./api.schema-B7NsqcGR.js";import"./types-CVZIcfwR.js";import"./employeeSchema-Cz-UxfTA.js";import"./metaPagination-BMwnZfrC.js";import"./useFieldWrapper-ChAVVfNL.js";import"./vee-validate-D5xA2-Dp.js";import"./vee-validate-zod-YABXOXEh.js";import"./dayjs.min-lasCq60O.js";import"./_commonjsHelpers-CE1G-McA.js";function ge(){const s=O(),{meta:h,links:c,search:i,loading:d}=X(s),y=Z(()=>s.searchedItems),p=m(),u=m(null),k=[{title:"No",key:"index",width:60,render:(e,o)=>(h.value.currentPage-1)*h.value.perPage+o+1},{title:"Name",key:"name"},{title:"Gender",key:"gender",render:e=>{const o=R(e.gender),b=z(e.gender);return T(te,{color:{color:o.bgColor,borderColor:o.borderColor,textColor:o.textColor},size:"medium",style:{display:"inline-flex",alignItems:"top",gap:"4px",padding:"0px 8px"}},()=>[T(ee,{component:o.icon,size:14,style:{marginRight:"2px"}}),b])}},{title:"Code",key:"employeeCode",width:150},{title:"Position",key:"position"},{title:"Department",key:"department"},{title:"Actions",key:"actions",width:150}];function R(e){const o=e?.toLowerCase(),b={icon:de,bgColor:"#e6f7ff",textColor:"#1890ff",borderColor:"#91d5ff"},v={icon:ce,bgColor:"#f3e8fd",textColor:"#9b59b6",borderColor:"#d8bfd8"},U={icon:me,bgColor:"#fff2e8",textColor:"#fa8c16",borderColor:"#ffd591"};switch(o){case"male":return b;case"female":return v;default:return U}}function z(e){return e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():"Unknown"}N(i,async e=>{await s.searchOrFetch(e)}),N(u,async e=>{if(e){const o=W(e);o&&(alert(),s.fetchEmployee({page:2,dateFrom:o[0],dateTo:o[1]}))}});const w=async e=>{await s.fetchEmployee({page:e})},P=async e=>{await s.fetchEmployee({page:1,perPage:e})},D=async()=>{await s.fetchEmployee()};function _(e){p.value=e}function C(e){s.deleteEmployee(e.id)}return{search:i,dateRange:u,loading:d,columns:k,rows:y,meta:h,links:c,editRow:p,handleEdit:_,handleDelete:C,handleRefresh:D,handlePageChange:w,handlePageSizeChange:P}}const he={class:"flex flex-col gap-8"},ye={class:"flex justify-between items-center"},_e={class:"w-84 flex-auto"},Ce={class:"text-xl font-bold mb-1"},be={class:"w-16 flex-auto text-right"},ve={class:"flex gap-10"},xe={class:"flex-1"},we={class:""},Ee={class:"flex justify-end mt-4"},ke={class:"text-sm text-gray-400 font-normal"},at=oe({__name:"EmployeeView",setup(s){const h=se(),{meta:c}=M(),i=m(null),d=m(!1),y=m("Create Employee"),p=m("Create Employee"),u=m("Quickly register and onboard new employees."),k=()=>{alert("this feature coming soon")},R=f=>{i.value=f,d.value=!0,p.value="Edit Employee",u.value="Update existing employee details and records.",y.value="Apply Changes"},z=f=>{G(f)},w=()=>{p.value="Create Employee",u.value="Quickly register and onboard new employees.",y.value="Create Employee",i.value=null,d.value=!1},P=async f=>{await L(i.value.id,f),w()},{handleFetchEmployee:D}=M(),{search:_,dateRange:C,loading:e,columns:o,rows:b,meta:v,handleRefresh:U,handlePageChange:$,handlePageSizeChange:H}=ge(),{updateEmployee:L,deleteEmployee:G}=Y();return ae(()=>{D()}),ne({title:c.value.title,meta:[{name:"description",content:c.value.description}]}),(f,l)=>{const F=x("n-icon"),S=x("n-breadcrumb-item"),I=x("n-breadcrumb"),A=x("n-pagination"),B=x("n-modal");return re(),le("div",he,[n("div",ye,[n("div",_e,[n("h2",Ce,E(t(c).title),1),n("p",null,E(t(c).description),1)]),n("div",be,[a(I,null,{default:g(()=>[a(S,null,{default:g(()=>[a(F,{component:t(ue)},null,8,["component"]),l[4]||(l[4]=ie(" Home",-1))]),_:1}),a(S,null,{default:g(()=>[a(F,{component:t(fe)},null,8,["component"])]),_:1})]),_:1})])]),n("div",ve,[n("div",xe,[a(j,{modelValue:t(_),"onUpdate:modelValue":l[0]||(l[0]=r=>V(_)?_.value=r:null),dateRange:t(C),"onUpdate:dateRange":l[1]||(l[1]=r=>V(C)?C.value=r:null),"onClick:export":k,"onClick:refresh":t(U)},null,8,["modelValue","dateRange","onClick:refresh"])]),n("div",we,[a(Q,{label:"Create Employee",icon:t(pe),type:"primary",onClick:l[2]||(l[2]=r=>t(h).push({name:"employee-form"}))},null,8,["icon"])])]),a(q,{columns:t(o),data:t(b),loading:t(e)},{actions:g(({row:r})=>[a(K,{row:r,"label-button-delete":"Delete","onClick:edit":R,"onClick:delete":Re=>z(r.id)},null,8,["row","onClick:delete"])]),_:1},8,["columns","data","loading"]),n("div",Ee,[a(A,{page:t(v).currentPage,"page-size":t(v).perPage,"page-count":t(v).lastPage,"show-size-picker":"","page-sizes":[5,10,20,50],"onUpdate:page":t($),"onUpdate:pageSize":t(H)},null,8,["page","page-size","page-count","onUpdate:page","onUpdate:pageSize"])]),a(B,{show:d.value,"onUpdate:show":l[3]||(l[3]=r=>d.value=r),"on-after-leave":w,closable:!0,preset:"card",style:{width:"900px"}},{header:g(()=>[n("h6",null,E(p.value),1),n("p",ke,E(u.value),1)]),default:g(()=>[a(J,{initialData:i.value,"onClick:submitted":P,submitLabel:y.value,submitType:"success"},null,8,["initialData","submitLabel"])]),_:1},8,["show"])])}}});export{at as default};
